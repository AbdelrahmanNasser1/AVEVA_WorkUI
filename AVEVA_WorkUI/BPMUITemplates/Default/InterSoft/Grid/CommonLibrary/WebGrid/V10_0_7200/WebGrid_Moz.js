var WGMozEngine={FormatRootTable:function(a){var b=a.RootTable;var c=b.GetElement(WG40.COLHEADER,WG40.HTMLTABLE);if(IsGecko30()){WGMozEngine.FixFilterColumns(b);return}WGMozEngine.FixWidthGeneric(c);WGMozEngine.FixFilterColumns(b);WGMozEngine.FixRowSeparator(b);WGMozEngine.FixGBBPadding(b)},FormatChildTable:function(b){var a=b.GetElement(WG40.COLHEADER,WG40.HTMLTABLE);var c=b.GetTable();WG50Engine.EmulateAttributes(a);if(IsGecko30()){WGMozEngine.FixFilterColumns(c);return}WGMozEngine.FixWidthGeneric(a);WGMozEngine.FixRowSeparator(c)},FixGBBPadding:function(a){},FixWidthGeneric:function(e){if(!IS.moz){return}var d=e.rows;for(var b=0;b<d.length;b++){WG50Engine.EmulateAttributes(d[b]);var a=d[b].cells;for(var c=0;c<a.length;c++){WG50Engine.EmulateAttributes(a[c]);if(a[c].style.width.indexOf("%")>0){continue}IS.SetWidth(a[c],a[c].style.width)}}},FixRowSeparator:function(a){},FixFilterColumns:function(l,n){if(l.IsUseColumnSet){if(l.Get("AllowFilter")=="Yes"){var h=l.GetFilterRow(n);var k=wgGetColumnSetRows(h);if(k){try{for(var f=0;f<k.length;f++){for(var g=0;g<k[f].cells.length;g++){var c=k[f].cells[g];WG50Engine.EmulateAttributes(c);if(c.type=="FilterColumn"){h=k[f];var d=wgGetCSCellByPosition(h,c.r,c.c,c.cs);var m=d.childNodes[0];var a=d.offsetWidth;if(a-18>0){m.style.width=a-18}else{m.style.width=18}if(IS.moz){WGMozEngine.ResizeFilterColumn(d,a)}}}}}catch(b){}}}}else{if(l.Get("AllowFilter")=="Yes"){var h=l.GetFilterRow(n);if(h){try{for(var f=0;f<h.cells.length;f++){var c=h.cells[f];WG50Engine.EmulateAttributes(c);if(c.type=="FilterColumn"){var d=h.cells[c.cellIndex];var m=d.childNodes[0];var a=d.offsetWidth;if(a-16>0){m.style.width=a-16}else{m.style.width=16}if(!IS.ie){WGMozEngine.ResizeFilterColumn(d,a)}}}}catch(b){}}}}},FixColumnWidth:function(f,b,d,c){var h=b.parentElement;var g=f.GetElement(d,WG40.HTMLTABLE,h);if(g.rows.length>0){var e=null;if(d==WG40.BODY){e=wgGetRowByPositionExact(g,0)}else{e=g.rows[1]}if(e){var a=wgGetCellByName(e,b.colName);if(d==WG40.COLFOOTER){a=e.cells[b.cellIndex];a.style.width="300px"}if(a){if(c){a.style.width=c}else{a.style.width=a.offsetWidth}}}if(IsGecko30()||IS.safari){g.style.width="90%";setTimeout(function(){g.style.width="100%"},1)}}},FireKeyEvent:function(a,d){var c=a;if(window.KeyEvent){var b=document.createEvent("KeyEvents");b.initKeyEvent("keyup",true,true,window,false,false,false,false,d,0)}else{var b=document.createEvent("UIEvents");b.initUIEvent("keyup",true,true,window,1);b.keyCode=d}c.dispatchEvent(b)},ResizeFilterColumn:function(a,b){var e=a.childNodes[0];var d=a.childNodes[1];if(e.tagName=="SPAN"){d.style.position="relative";d.style.left=b-16-e.offsetWidth}},OnTableResize:function(b){b.CacheTBodyHeight=null;var a=b.RootTable.GetElement(WG40.BODY,WG40.HTMLDIV);var c=WGUIEngine.GetTableBodyHeight(a);if(c==0){setTimeout(function(){WGMozEngine.OnTableResize(b)},100)}else{a.style.height=c+"px"}},OnResize:function(c,b){if(c.LayoutSettings.AutoHeight){var d=0;d=document.body.clientHeight-document.body.offsetHeight;if(IsGecko18()){d=0}c.NeedHeightResize=true;ISMoz.SetHeight(c.FrameObj,WGUIEngine.GetGridHeight(c.FrameObj)+d);if(!b){WGMozEngine.OnTableResize(c)}}if(c.LayoutSettings.AutoWidth){c.NeedWidthResize=true;ISMoz.SetWidth(c.FrameObj,WGUIEngine.GetGridWidth(c.FrameObj))}if(c.FrameObj.style.width.indexOf("%")>-1){var a=c.RootTable.GetElement(WG40.BODY,WG40.HTMLDIV);WG50Engine.ResizeTable(a.childNodes[0])}if(c.FrameObj.style.height.indexOf("%")>0){c.NeedHeightResize=true;WGMozEngine.OnTableResize(c)}},OnBlur:function(b){var c=event.explicitOriginalTarget;var a=event.target;if(c){a=c}if(!b.FrameObj.contains(a)){if(wg_Global.CalPopObj){if(wg_Global.CalPopObj._e.contains(a)){return}}WG50Engine.OnBlur(b,a);wg_Global.ActiveGrid=null}},PreloadImages:function(a){var c=a.ResolveImagePathEx(a.LayoutSettings.ImageSettings.CurrentRowImage);var b=new Image();b.src=c},OnMouseDown:function(a){event.cancelBubble=true;event.returnValue=false},CopyToClipboard:function(a){alert("This function is not natively supported by the browser.")},EnsureEditFocus:function(b,a){var c=WG50Engine.GetTable(a);if(c!=null){c.focus()}},RefreshColGroupStructure:function(d){var c=d.RootTable.Columns;var b=d.RootTable.GetElement(WG40.COLGROUP,null);for(var e=0;e<c.length;e++){var a=c[e];if(a.Visible&&!a.HiddenFromView){var f=a.GetViewPosition();b.children[f].width=a.GetWidth()}}},ForceFullColumnWidth:function(b,f){var d=b.parentElement.parentElement.rows[0];var c=wgGetCellByName(d,f.Columns[0].Name);var a=f.GetElement(WG40.COLGROUP,null,b);var e=wgGetHierRecord(b);a.children[c.cellIndex].width="100%";a.children[a.children.length-1].width="1";b.cells[b.cells.length-1].style.width="1";c.style.width="100%";e.FullColumnWidthInitialized=true}};function WebGridMozDestructor(){var a=delete WGMozEngine}window.attachEvent("onunload",WebGridMozDestructor);if(typeof(Sys)!="undefined"){Sys.Application.notifyScriptLoaded()};