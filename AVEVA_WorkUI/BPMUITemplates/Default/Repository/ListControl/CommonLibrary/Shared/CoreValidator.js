function EscapeRegExpSpecialChar(f){var c="^$*+?{}()|.:=![]-,",e="",d;for(var b=0;b<f.length;b++){d=f.charAt(b);if(c.indexOf(d)>-1){d="\\"+d}else{if(d==" "){d="\\s"}}e+=d}return e}function GetCharFromKeyCode(e,c){var d="";var f=e.shiftKey;var g=e.keyCode;for(var b=0;b<c.length;b++){if(c[b][0]==g&&c[b][2]==f){d=c[b][1]}}return d}function CreateArrayKey(){var a=new Array();a[0]=new Array(192,"~",true);a[1]=new Array(49,"!",true);a[2]=new Array(50,"@",true);a[3]=new Array(51,"#",true);a[4]=new Array(52,"$",true);a[5]=new Array(53,"%",true);a[6]=new Array(54,"^",true);a[7]=new Array(55,"&",true);a[8]=new Array(56,"*",true);a[9]=new Array(57,"(",true);a[10]=new Array(48,")",true);a[11]=new Array(189,"_",true);a[12]=new Array(187,"+",true);a[13]=new Array(220,"|",true);a[14]=new Array(192,"`",false);a[15]=new Array(189,"-",false);a[16]=new Array(187,"=",false);a[17]=new Array(220,"\\",false);a[18]=new Array(219,"{",true);a[19]=new Array(221,"}",true);a[20]=new Array(186,":",true);a[21]=new Array(222,'"',true);a[22]=new Array(188,"<",true);a[23]=new Array(190,">",true);a[24]=new Array(191,"?",true);a[25]=new Array(219,"[",false);a[26]=new Array(221,"]",false);a[27]=new Array(186,";",false);a[28]=new Array(222,"'",false);a[29]=new Array(188,",",false);a[30]=new Array(190,".",false);a[31]=new Array(191,"/",false);a[32]=new Array(111,"/",false);a[33]=new Array(106,"*",false);a[34]=new Array(109,"-",false);a[35]=new Array(107,"+",false);return a}function TrimLiteralMarkerFromValue(f){var e="";var c=false;var d=null;var a=null;for(var b=0;b<f.length;b++){a=f.charAt(b);if(c==false){switch(a){case"\\":d="\\";c=false;continue;break;case"'":if(d==null){d="'";c=true;continue}break;case'"':if(d==null){d='"';c=true;continue}else{if(d=="\\"){d=null;c=false;a='"'}}break}}else{switch(a){case"'":if(d=="'"){d=null;c=false;continue}break;case'"':if(d=='"'){d=null;c=false;continue}break}}e+=a}return e}function ISClientData(a,c,b){this.OldValue=a;this.Type=c;this.Format=b;this.IsValid=false;this.Pattern="";this.NewValue="";this.FormattedValue="";this.FormattedData=new Array();this.PromptChar=null;this.CommonFormatPriority=false;this.RawFormat=b}function ISDateData(a,g,k,d,e,f,i,h,c,b,j){this.Day=a;this.Month=g;this.Year=k;this.Hour12=d;this.Hour24=e;this.Minute=f;this.Second=i;this.Period=h;this.Fraction=c;this.Designator=b;this.TimeZoneOffset=j}function ISBuiltInValidation(b,a){this.Data=b;this.CulInfo=a;this.objPattern;this.Validate=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISBuiltInValidationEngine.Validate(this)};this.CheckFormat=function(c){return ISBuiltInValidationEngine.CheckFormat(c)};this.CheckType=function(c){if(c!=null&&this.Data!=c){this.Data=c}return ISBuiltInValidationEngine.CheckType(this)};this.CheckUserInput=function(e,d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISBuiltInValidationEngine.CheckUserInput(e,this)};this.Mask=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISBuiltInValidationEngine.Mask(this)};this.UnMask=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISBuiltInValidationEngine.UnMask(this)};this.CheckDefaultKey=function(c,d){return ISBuiltInValidationEngine.CheckDefaultKey(c,d)};this.GetNewValuePrecision=function(d,e,c){return ISBuiltInValidationEngine.GetNewValuePrecision(d,e,c,this)}}var ISBuiltInValidationEngine={Validate:function(a){var b=false;if(ISBuiltInValidationEngine.CheckType(a)){ISBuiltInValidationEngine.CheckFormat(a.Data);if(a.objPattern==null){a.objPattern=new ISValidationPattern()}b=a.objPattern.ValidatePattern(a.Data,a.CulInfo)}a.Data.IsValid=b;return b},CheckFormat:function(a){var b=a.Format;if(b==null||b==""){switch(a.Type){case"numeric":b="g";break;case"date":b="d";break}a.Format=b}},CheckType:function(a){var b=a.Data;if(b.Type==""||b.Type==null){return false}var c;var d=b.Type.toString().toLowerCase();if(d.indexOf("datetime")>-1){c="datetime"}else{switch(d){case"number":c="number";if(b.Format==""||b.Format==null){b.Format="g"+ISBuiltInValidationEngine.GetNewValuePrecision(b.NewValue,"g",null,a)}break;case"system.single":case"float":c="number";if(b.Format==""||b.Format==null){b.Format="n"+ISBuiltInValidationEngine.GetNewValuePrecision(b.NewValue,"n","float",a)}break;case"double":case"system.double":c="number";if(b.Format==""||b.Format==null){b.Format="n"+ISBuiltInValidationEngine.GetNewValuePrecision(b.NewValue,"n","double",a)}break;case"decimal":case"system.decimal":c="number";if(b.Format==""||b.Format==null){b.Format="n"+ISBuiltInValidationEngine.GetNewValuePrecision(b.NewValue,"n","decimal",a)}break;case"sbyte":case"byte":case"system.sbyte":case"system.byte":case"short":case"ushort":case"int":case"uint":case"long":case"ulong":case"system.int16":case"system.uint16":case"system.int32":case"system.uint32":case"system.int64":case"system.uint64":c="number";if(b.Format!=null&&b.Format!=""){b.Format=("cdefgnp".indexOf(b.Format.substr(0,1))<0)?"n0":b.Format.substr(0,1)+"0"}else{b.Format="n"}break}}b.Type=c;return(c!=null)},CheckUserInput:function(b,a){if(ISBuiltInValidationEngine.CheckType(a)){ISBuiltInValidationEngine.CheckFormat(a.Data)}else{return false}if(a.objPattern==null){a.objPattern=new ISValidationPattern()}return a.objPattern.CheckUserInputKey(b,a.Data,a.CulInfo)},Mask:function(a){if(ISBuiltInValidationEngine.CheckType(a)){ISBuiltInValidationEngine.CheckFormat(a.Data)}else{return""}if(a.objPattern==null){a.objPattern=new ISValidationPattern()}return a.objPattern.MaskPattern(a.Data,a.CulInfo)},UnMask:function(a){if(ISBuiltInValidationEngine.CheckType(a)){ISBuiltInValidationEngine.CheckFormat(a.Data)}else{return""}if(a.objPattern==null){a.objPattern=new ISValidationPattern()}return a.objPattern.UnMaskPattern(a.Data,a.CulInfo)},CheckDefaultKey:function(d,g){var c=new Array();var e=false,f=d.keyCode;if(g.userAgent.toLowerCase().indexOf("mozilla")>-1){c[0]=9;c[1]=13;c[2]=8;c[3]=32;c[4]=37;c[5]=100;c[6]=39;c[7]=102;c[8]=37;c[9]=100;c[10]=39;c[11]=102;c[12]=107;c[13]=109;if(d.shiftKey){c[14]=187;c[15]=189}}for(var b=0;b<c.length;b++){if(f==c[b]){e=true;break}}return e},GetNewValuePrecision:function(d,f,b,a){var e="0";if(d!=null&&d!=""){numType=ISNumericPatternEngine.GetNumericType(f,a.CulInfo.NumberFormatInfo);numPtrn=ISNumericPatternEngine.GetNumberPattern(d,numType);var c=d.substr(d.indexOf(numPtrn.DecimalSeparator)+1);if(c!=""){e=new String(c.length);switch(b){case"float":if(parseFloat(e)>7){e="7"}break;case"double":if(parseFloat(e)>15){e="15"}break;case"decimal":if(parseFloat(e)>29){e="29"}break}}}return e}};function ISValidationPattern(b,a){this.Data=b;this.CulInfo=a;this.ValidatePattern=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISValidationPatternEngine.ValidatePattern(this)};this.CheckUserInputKey=function(e,d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISValidationPatternEngine.CheckUserInputKey(e,this)};this.MaskPattern=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISValidationPatternEngine.MaskPattern(this)};this.UnMaskPattern=function(d,c){if(d!=null&&this.Data!=d){this.Data=d}if(c!=null&&this.CulInfo!=c){this.CulInfo=c}return ISValidationPatternEngine.UnMaskPattern(this)};this.objPattern=new Object()}var ISValidationPatternEngine={ValidatePattern:function(b){var a;switch(b.Data.Type.toLowerCase()){case"number":if(b.objPattern.constructor!=ISNumericPattern){b.objPattern=new ISNumericPattern()}a=b.CulInfo.NumberFormatInfo;break;case"datetime":if(b.objPattern.constructor!=ISDateTimePattern){b.objPattern=new ISDateTimePattern()}a=b.CulInfo.DateTimeFormatInfo;break}b.objPattern.CreatePattern(b.Data,a);switch(b.Data.Type.toLowerCase()){case"number":a=b.objPattern.NumInfo;break;case"datetime":a=b.objPattern.DateInfo;break}b.objPattern.ValidateData(b.Data,a);if(b.Data.IsValid||b.Data.IsGeneralValid){b.objPattern.MaskData(b.Data,a)}return b.Data.IsValid},CheckUserInputKey:function(a,c){var b;switch(c.Data.Type.toLowerCase()){case"number":b=true;break;case"datetime":b=true;break}return b},UnMaskPattern:function(b){var a;switch(b.Data.Type.toLowerCase()){case"number":if(b.objPattern.constructor!=ISNumericPattern){b.objPattern=new ISNumericPattern()}a=b.CulInfo.NumberFormatInfo;break;case"datetime":if(b.objPattern.constructor!=ISDateTimePattern){b.objPattern=new ISDateTimePattern()}a=b.CulInfo.DateTimeFormatInfo;break}if(b.Data.Pattern==""){b.objPattern.CreatePattern(b.Data,a);switch(b.Data.Type.toLowerCase()){case"number":a=b.objPattern.NumInfo;break;case"datetime":a=b.objPattern.DateInfo;break}}return b.objPattern.UnMaskData(b.Data,a)},MaskPattern:function(b){var a;switch(b.Data.Type.toLowerCase()){case"number":if(b.objPattern.constructor!=ISNumericPattern){b.objPattern=new ISNumericPattern()}a=b.CulInfo.NumberFormatInfo;break;case"datetime":if(b.objPattern.constructor!=ISDateTimePattern){b.objPattern=new ISDateTimePattern()}a=b.CulInfo.DateTimeFormatInfo;break}if(b.Data.Pattern==""){b.objPattern.CreatePattern(b.Data,a);switch(b.Data.Type.toLowerCase()){case"number":a=b.objPattern.NumInfo;break;case"datetime":a=b.objPattern.DateInfo;break}}return b.objPattern.MaskData(b.Data,a)}};function ISNumericPattern(a,b){this.Data=a;this.NumInfo=b;this.NumberDecimalDigit=this.CurrencyDecimalDigit=this.PercentDecimalDigit=this.ScientificDecimalDigit=null;this.CreatePattern=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.NumInfo!=d){this.NumInfo=d}return ISNumericPatternEngine.CreateNumericPattern(this)};this.ValidateData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.NumInfo!=d){this.NumInfo=d}return ISNumericPatternEngine.ValidateNumeric(this)};this.MaskData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.NumInfo!=d){this.NumInfo=d}return ISNumericPatternEngine.MaskNumeric(this)};this.UnMaskData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.NumInfo!=d){this.NumInfo=d}return ISNumericPatternEngine.UnMaskNumeric(this)}}var ISNumericPatternEngine={GetDecimalDigit:function(b,c){var a;switch(c.Type){case"n":a=b.NumberDecimalDigit==null?c.DecimalDigit:b.NumberDecimalDigit;break;case"d":a=0;break;case"c":a=b.CurrencyDecimalDigit==null?c.DecimalDigit:b.CurrencyDecimalDigit;break;case"p":a=b.PercentDecimalDigit==null?c.DecimalDigit:b.PercentDecimalDigit;break;case"e":a=b.ScientificDecimalDigit==null?c.DecimalDigit:b.ScientificDecimalDigit;break}return a},CheckNumFormat:function(b){if("cdefgnp".indexOf(b.Data.Format.substr(0,1))<0){var c=new ISCustomNumberInfo();var a=b.Data.OrgFormat==null||b.Data.OrgFormat==""?b.Data.Format:b.Data.OrgFormat;b.NumInfo=c.Create(b.Data.Format,b.NumInfo);b.Data.Format=b.NumInfo.CustomFormat;b.Data.OrgFormat=a}},ResetPrecision:function(a){a.NumberDecimalDigit=a.CurrencyDecimalDigit=a.PercentDecimalDigit=a.ScientificDecimalDigit=null;if(a.Data.Format.length>1){var b=a.Data.Format.substr(1);if(!isNaN(b)){a.Data.Format=a.Data.Format.substr(0,1);switch(a.Data.Format){case"c":a.CurrencyDecimalDigit=parseFloat(b);break;case"d":a.DecimalFormat=(b!=null&&b!="")?ISNumericPatternEngine.CreateZeroDigit(b):"0";break;case"e":a.ScientificDecimalDigit=parseFloat(b);break;case"f":case"g":case"n":a.NumberDecimalDigit=parseFloat(b);break;case"p":a.PercentDecimalDigit=parseFloat(b);break}}}},CreateNumericPattern:function(b){ISNumericPatternEngine.CheckNumFormat(b);var a=b.Data;var c=b.NumInfo;a.Format=a.Format.toLowerCase();ISNumericPatternEngine.ResetPrecision(b);var d=a.Format;if(a.OrgFormat!=null&&a.OrgFormat.indexOf("c")>-1&&d.indexOf("c")<0){d="c"}switch(d){case"c":a.Pattern=ISNumericPatternEngine.GetCurrPattern(b);break;case"d":a.Pattern=ISNumericPatternEngine.GetDecPattern(c);break;case"e":a.Pattern=ISNumericPatternEngine.GetScienPattern(c);break;case"f":a.Pattern=ISNumericPatternEngine.GetFloatPattern(b);break;case"g":a.Pattern=ISNumericPatternEngine.GetGeneralPattern(c);break;case"n":a.Pattern=ISNumericPatternEngine.GetNumPattern(b);break;case"p":a.Pattern=ISNumericPatternEngine.GetPercentPattern(b);break}return a.Pattern},ValidateNumeric:function(e){if(e.Data.Pattern==null||e.Data.Pattern==""){ISNumericPatternEngine.CreateNumericPattern(e)}ISNumericPatternEngine.CheckNumFormat(e);var c=e.Data;var f=e.NumInfo;if(c.NewValue==null||c.NewValue==""){c.NewValue="0"}else{if(c.NewValue.length==1){var h=ISNumericPatternEngine.GetAdditionalValidChars(c,f);for(var b=0;b<h.length;b++){if(c.NewValue==h.charAt(b)){c.NewValue="0";break}}}}c.FormattedValue="";var d=false,g;if(ISNumericPatternEngine.IsValidNumericChar(c,f)){re=new RegExp(c.Pattern,"img");g=c.NewValue.match(re);if(g==null){c.NewValue=c.NewValue.replace(new RegExp("\\s+","g"),"");g=c.NewValue.match(re)}if(g==null){c.IsValid=false;re=new RegExp(ISNumericPatternEngine.GetGeneralPattern(f),"img");ISNumericPatternEngine.RemoveNumericMask(c,f);g=c.FormattedValue.match(re);c.IsGeneralValid=(g==null)?c.FormattedValue.match(/^(\s*\d*\s*)|(\s*\-\s*\d*\s*)|(\s*\d*\s*\-\s*)$/img)!=null:true;return c.IsGeneralValid}else{c.IsValid=true;return c.IsValid}}else{c.FormattedValue="";c.IsGeneralValid=false;c.IsValid=false;return false}},MaskNumeric:function(b){ISNumericPatternEngine.CheckNumFormat(b);var a=b.Data;var c=b.NumInfo;if(ISNumericPatternEngine.IsValidNumericChar(a,c)){ISNumericPatternEngine.RemoveNumericMask(a,c);ISNumericPatternEngine.CheckNumberScaling(a,c);if(ISNumericPatternEngine.IsNotZeroFormatValue(a,c)){ISNumericPatternEngine.ParseMaskWithFormat(a,c);if(a.Format.toLowerCase()!="p"&&a.Format.toLowerCase()!="e"){ISNumericPatternEngine.CreateDecimalMaskData(b)}switch(a.Format.toLowerCase()){case"c":ISNumericPatternEngine.CreateCurrMask(a,c);break;case"e":ISNumericPatternEngine.CreateScienMask(b);break;case"n":ISNumericPatternEngine.CreateNumMask(a,c);break;case"p":ISNumericPatternEngine.CreatePercentMask(b);break}if(a.Format.toLowerCase()=="p"||a.Format.toLowerCase()=="e"){ISNumericPatternEngine.CreateDecimalMaskData(b)}ISNumericPatternEngine.AddPatternMask(a,c)}a.IsValid=true}else{a.FormattedValue=""}a.FormattedValue=TrimLiteralMarkerFromValue(a.FormattedValue);return a.FormattedValue},UnMaskNumeric:function(b){ISNumericPatternEngine.CheckNumFormat(b);var c=b.NumInfo;var a=b.Data;var d="";if(ISNumericPatternEngine.IsValidNumericChar(a,c)){d=ISNumericPatternEngine.RemoveNumericMask(a,c)}return d},CheckNumberScaling:function(a,b){},ParseMaskWithFormat:function(a,e){var j=a.FormattedValue,h,i;var g,f,c,d;g=ISNumericPatternEngine.GetNumericType(a.Format,e);f=ISNumericPatternEngine.GetNumberPattern(a.NewValue,g);var b=f.DecimalSeparator;if(f.Format.indexOf(b)>-1&&b!=""){c=f.Format.substr(0,f.Format.indexOf(b));d=f.Format.substr(f.Format.indexOf(b)+1);d=d.toLowerCase();if(d.indexOf("e")>-1){d=d.substr(0,d.indexOf("e"))}}else{c=(a.Format!="d")?f.Format:((this.DecimalFormat!=null&&this.DecimalFormat!="")?this.DecimalFormat:f.Format);d=""}if(j.indexOf(b)>-1){if(b!=null&&b!=""){h=j.substr(0,j.indexOf(b));i=j.substr(j.indexOf(b)+1)}else{h=j;i=""}}else{h=j;i=""}realNumVal=ISNumericPatternEngine.GetMaskFormattedValue("notDecimal",c,h,f.DecimalSeparator,a.Format,a.PromptChar);realNumVal=realNumVal.length<1?"0":realNumVal;decimalVal=ISNumericPatternEngine.GetMaskFormattedValue("decimal",d,i,f.DecimalSeparator,a.Format,a.PromptChar);a.FormattedValue=realNumVal+decimalVal},GetMaskFormattedValue:function(i,d,g,c,e,f){var h="";d=d.replace(new RegExp("[,$%-()\\s]+","g"),"").replace(new RegExp("[^#0]+","g"),"");g=g.replace(new RegExp("[^\\d]+","g"),"");if(e!="g"||(e=="g"&&g!="")){if(d.length>=g.length){var b=g.length,j=false;for(;b<d.length;b++){if(i=="notDecimal"){g="0"+g}else{g=g+"0"}}if(i=="notDecimal"){for(b=0;b<d.length;b++){if(!(d.charAt(b)=="#"&&g.charAt(b)=="0"&&j==false)||j==true){h=h+g.charAt(b);if(g.charAt(b)!="0"||d.charAt(b)=="0"){j=true}}else{if(f!=null){h=h+f}}}}else{for(b=d.length-1;b>-1;b--){if(!(d.charAt(b)=="#"&&g.charAt(b)=="0"&&j==false)||j==true){h=g.charAt(b)+h;if(g.charAt(b)!="0"||d.charAt(b)=="0"){j=true}}else{if(f!=null){h=h+f}}}if(h.length>0){h=c+h}}}else{if(i=="decimal"){if(g.length>0){h=c+g}}else{h=g}}}return h},GetNumericType:function(a,b){var c;switch(a){case"c":c=b.Currency;break;case"p":c=b.Percent;break;case"e":c=b.Scientific;break;case"d":c=b.Decimal;break;default:c=b.Number;break}return c},GetNumberPattern:function(c,b){var a;if(c.indexOf("-")>-1||c.indexOf("(")>-1){a=b.Negative}else{a=b.Positive}return a},GetCurrPattern:function(b){var a=b.NumInfo.Currency;var c;c=ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"currency",true,a.Symbol,a.GroupSizes,a.Positive);c=c+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"currency",false,a.Symbol,a.GroupSizes,a.Negative);if(a.Negative.Pattern.indexOf("(")>-1){c=c+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"currency",false,a.Symbol,a.GroupSizes,a.Negative,a.Negative.Pattern.replace("(","-").replace(")",""))}if(a.ZeroPattern!=null){c=c+"|"+a.ZeroPattern}return c},GetDecPattern:function(a){return"^\\d*$"},GetScienPattern:function(b){var d=b.Scientific;var a=d.Positive.DecimalSeparator;var c="(^\\d{1}\\"+a+"\\d+E(\\+|\\-)?\\d{0,"+d.Positive.ScienExpDigit+"}$)";a=d.Negative.DecimalSeparator;c+="|(^"+d.Negative.Pattern.replace("-","\\s*\\-\\s*").replace("n","\\d{1}\\"+a+"\\d+E(\\+|\\-)?\\d{0,"+d.Negative.ScienExpDigit+"}").replace(new RegExp("\\s*","g"),"")+"$)";if(d.ZeroPattern!=null){c=c+"|"+d.ZeroPattern}return c},GetFloatPattern:function(c){var d=c.NumInfo;var f=EscapeRegExpSpecialChar(d.Number.Positive.Pattern);var b=d.Number.Positive.DecimalSeparator;var a=ISNumericPatternEngine.GetDecimalDigit(c,d.Number.Positive);var e=f.replace("n","(^\\d*"+((b!=""&&b!=null)?"\\"+b+"?\\d{0,"+a+"}":"")+"$)");b=d.Number.Negative.DecimalSeparator;a=ISNumericPatternEngine.GetDecimalDigit(c,d.Number.Negative);f=EscapeRegExpSpecialChar(d.Number.Negative.Pattern);f=f.replace("\\-","\\s*\\-\\s*");e+="|(^"+f.replace("n","\\d*"+((b!=""&&b!=null)?"\\"+b+"?\\d{0,"+a+"}":"")).replace(new RegExp("\\s*","g"),"")+"$)";if(f.indexOf("(")>-1){f=d.Number.Negative.Pattern.replace("(","\\s*\\-\\s*").replace(")","");e+="|(^"+f.replace("n","\\d*"+((b!=""&&b!=null)?"\\"+b+"?\\d{0,"+a+"}":"")).replace(new RegExp("\\s*","g"),"")+"$)"}if(d.Number.ZeroPattern!=null){e=e+"|"+d.Number.ZeroPattern}return e},GetGeneralPattern:function(c){var b=c.Number;var f=EscapeRegExpSpecialChar(b.Positive.Pattern);var a=b.Positive.DecimalSeparator;var d,e;if(f.indexOf("n")>-1){e="n"}if(f.indexOf("c")>-1){e="c"}if(f.indexOf("d")>-1){e="d"}d=f.replace(e,"(^\\d*"+((a!=""&&a!=null)?"\\"+a+"?":"")+"\\d*$)");a=b.Negative.DecimalSeparator;f=EscapeRegExpSpecialChar(b.Negative.Pattern);f=f.replace("\\-","\\s*\\-\\s*");if(f.indexOf("n")>-1){e="n"}if(f.indexOf("c")>-1){e="c"}if(f.indexOf("d")>-1){e="d"}d+="|(^"+f.replace(e,"\\d*"+((a!=""&&a!=null)?"\\"+a+"?":"")+"\\d*").replace(new RegExp("\\s*","g"),"")+"$)";if(f.indexOf("(")>-1){f=b.Negative.Pattern.replace("(","\\s*\\-\\s*").replace(")","");d+="|(^"+f.replace(e,"\\d*"+((a!=""&&a!=null)?"\\"+a+"?":"")+"\\d*").replace(new RegExp("\\s*","g"),"")+"$)"}if(b.ZeroPattern!=null){d=d+"|"+b.ZeroPattern}return d},GetNumPattern:function(a){var b=a.NumInfo.Number;var c;c=ISNumericPatternEngine.CreateNumericPatternWithSeparator(a,"number",true,b.Symbol,b.GroupSizes,b.Positive);c=c+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(a,"number",false,b.Symbol,b.GroupSizes,b.Negative);if(b.Negative.Pattern.indexOf("(")>-1){c=c+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(a,"number",false,b.Symbol,b.GroupSizes,b.Negative,b.Negative.Pattern.replace("(","-").replace(")",""))}if(b.ZeroPattern!=null){c=c+"|"+b.ZeroPattern}return c},GetPercentPattern:function(b){var e,c,a,f;var d=b.NumInfo.Percent;e=ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"percent",true,d.Symbol,d.GroupSizes,d.Positive);e=e+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"percent",false,d.Symbol,d.GroupSizes,d.Negative);if(d.Negative.Pattern.indexOf("(")>-1){e=e+"|"+ISNumericPatternEngine.CreateNumericPatternWithSeparator(b,"percent",false,d.Symbol,d.GroupSizes,d.Negative,d.Negative.Pattern.replace("(","-").replace(")",""))}if(d.ZeroPattern!=null){e=e+"|"+d.ZeroPattern}return e},CreateNumericPatternWithSeparator:function(e,j,c,i,b,g,d){var f,a,h;f=ISNumericPatternEngine.CreateNumericFormat(b,g.GroupSeparator);a=ISNumericPatternEngine.CreateDecimalFormat(ISNumericPatternEngine.GetDecimalDigit(e,g),g.DecimalSeparator);h=d==null?g.Pattern:d;h=EscapeRegExpSpecialChar(h);if(!c){h=h.replace("\\(","\\s*\\(\\s*").replace("\\)","\\s*\\)\\s*").replace("\\-","\\s*\\-\\s*")}if(h.indexOf("n")>-1){h=h.replace("n",f+a)}else{if(h.indexOf("d")>-1){h=h.replace("d",f+a)}else{if(h.indexOf("p")>-1){h=h.replace("p",f+a)}}}if(j=="currency"){h=h.replace("$","\\s*\\"+i+"\\s*")}else{if(j=="percent"){h=h.replace(i,"\\s*\\"+i+"\\s*")}}h="(?:^"+h.replace(new RegExp("\\s*","g"),"")+"$)";return h},CreateNumericFormat:function(c,d){var e="";if(d!=null&&d!=""){for(var b=0;b<c.length;b++){if((b+1)==c.length){e="\\d*(\\"+d+"\\d{"+c[b]+"})*"+e}else{if(e!=""){e="\\d{"+c[b]+"}\\"+d+e}else{e="\\d{"+c[b]+"}"}}}}else{e="\\d*"}return e},CreateDecimalFormat:function(b,a){if(a!=""&&a!=null){return"\\"+a+"?\\d{0,"+b+"}"}else{return""}},CreateNumericMaskData:function(val,numType){var tempVal,fVal="",pos=0,e;var group,groupSeparator,decSeparator,numPtrn;group=numType.GroupSizes;numPtrn=ISNumericPatternEngine.GetNumberPattern(val,numType);with(numPtrn){groupSeparator=GroupSeparator;decSeparator=DecimalSeparator}if(decSeparator!=""){tempVal=(val.indexOf(decSeparator)<0)?val:val.substr(0,val.indexOf(decSeparator))}else{tempVal=val}if(group.length==1){if((tempVal.length/group[0])<=1){fVal=tempVal}else{e=(tempVal.length%group[0]);for(var b=Math.floor(tempVal.length/group[0]);b>0;b--){pos=group[0]*(b-1)+e;fVal=groupSeparator+tempVal.substr(pos,group[0])+fVal}fVal=tempVal.substr(0,e)+fVal}}else{var a,d=0;for(a=0;a<group.length;a++){pos=group[a]*(a-1)+1;if((a+1)!=group.length){d+=parseFloat(group[a]);fVal=tempVal.substr(tempVal.length-d,group[a])+groupSeparator+fVal}else{e=(tempVal.length%group[a]);for(var c=Math.floor(tempVal.length/group[a]);c>0;c--){pos=group[a]*(c-1)+e;fVal=groupSeparator+tempVal.substr(pos,group[a])+fVal}}}fVal=tempVal.substr(0,((tempVal.length-d)%group[a]))+fVal}if(fVal.indexOf(groupSeparator)==(fVal.length-1)&&groupSeparator!=""){fVal=fVal.substr(0,(fVal.length-2))}if(fVal.indexOf(groupSeparator)==0&&groupSeparator!=""){fVal=fVal.substr(1,(fVal.length-1))}if(val.indexOf(decSeparator)>=0&&decSeparator!=""){fVal=fVal+val.substr(val.indexOf(decSeparator),val.length-val.indexOf(decSeparator))}return fVal},CreateDecimalMaskData:function(g){var a=g.Data;var h=g.NumInfo;var n=a.FormattedValue,f=a.Format,c,d;var j,i;j=ISNumericPatternEngine.GetNumericType(f,h);i=ISNumericPatternEngine.GetNumberPattern(a.NewValue,j);c=ISNumericPatternEngine.GetDecimalDigit(g,i);d=i.DecimalSeparator;c=parseFloat(c);if(d!=""){var k=n.indexOf(d);if(k>-1){if(c>0){var b,e="";b=n.substr(k+1,n.length-(k+1)).toLowerCase();n=n.substr(0,k+1);if(f=="e"){k=b.indexOf("e");if(k>-1){e=b.substr(k,b.length-k);b=b.substr(0,k);if(b.length>c){b=b.substr(0,c)}}}if(b.length>c){if(f!="e"){var l=parseFloat(b.charAt(c));var m=parseFloat(b.charAt(c-1));b=b.substr(0,c-1);if(l>=5){m=m+1;if(m>9){b=ISNumericPatternEngine.RoundNumericMaskData(b,1);b=b+"0"}else{b=b+(m).toString()}}else{b=b+m.toString()}}}else{b=b+ISNumericPatternEngine.CreateZeroDigit(c-b.length)}if(b.length>c){n=n.replace(d,"");n=ISNumericPatternEngine.RoundNumericMaskData(n,1);n=n+d;b=b.substr(1,b.length-1)}n+=b+e}else{n=n.substr(0,k)}}}a.FormattedValue=n;return n},RoundNumericMaskData:function(f,c){var e="",d;for(var b=f.length-1;b>-1;b--){d=parseFloat(f.charAt(b));if(d>=9){e="0"+e;if(b==0){e="1"+e}else{c=1}}else{e=(d+parseFloat(c)).toString()+e;c=0}}return e},AddPatternMask:function(a,c){var e=a.FormattedValue;var b;var d=a.NewValue.toLowerCase();if(a.Format=="e"){if(d.indexOf("e-")>-1){d=d.replace("e-","")}}b=(d.indexOf("-")>-1)?true:(d.indexOf("(")>-1)?true:false;switch(a.Format){case"c":e=(b)?c.Currency.Negative.Pattern.replace("n",e):c.Currency.Positive.Pattern.replace("n",e);e=e.replace("$",c.Currency.Symbol);break;case"p":e=(b)?c.Percent.Negative.Pattern.replace("n",e):c.Percent.Positive.Pattern.replace("n",e);e=e.replace("%",c.Percent.Symbol);break;case"e":e=(b)?c.Scientific.Negative.Pattern.replace("n",e).replace("e",e):c.Scientific.Positive.Pattern.replace("n",e).replace("e",e);e=e.replace("e","E");break;default:if(c.Number.Positive.Pattern.indexOf("n")>-1){e=(b)?c.Number.Negative.Pattern.replace("n",e):c.Number.Positive.Pattern.replace("n",e)}else{if(c.Number.Positive.Pattern.indexOf("d")>-1){e=(b)?c.Number.Negative.Pattern.replace("d",e):c.Number.Positive.Pattern.replace("d",e)}else{if(c.Number.Positive.Pattern.indexOf("c")>-1){e=(b)?c.Currency.Negative.Pattern.replace("n",e):c.Currency.Positive.Pattern.replace("n",e)}}}}a.FormattedValue=e;return e},CreateCurrMask:function(a,b){a.FormattedValue=ISNumericPatternEngine.CreateNumericMaskData(a.FormattedValue,b.Currency)},CreateScienMask:function(e){var a=e.Data;var f=e.NumInfo;var l=ISNumericPatternEngine.RemoveLeadZero(a.FormattedValue.toLowerCase());var c,b,d,j;var h,g;h=ISNumericPatternEngine.GetNumericType(a.Format,f);g=ISNumericPatternEngine.GetNumberPattern(a.NewValue,h);if(l.length==1){l=l+g.DecimalSeparator+ISNumericPatternEngine.CreateZeroDigit(ISNumericPatternEngine.GetDecimalDigit(e,g))}var i=(l.indexOf(g.DecimalSeparator)>-1)?l.indexOf(g.DecimalSeparator):0;if(i==0){l="0"+l;i=1}l=l.replace(g.DecimalSeparator,"");var k=0;while(i<=l.length){if(parseFloat(l.substr(0,i))<=0){i+=1;k+=1}else{break}}if(k>0){l=l.substr(i-1);if(l==""){l="0"+ISNumericPatternEngine.CreateZeroDigit(ISNumericPatternEngine.GetDecimalDigit(e,g));k=0;i=1}}l=l.substr(0,1)+g.DecimalSeparator+l.substr(1,ISNumericPatternEngine.GetDecimalDigit(e,g))+((k>0)?"E-":"E+")+ISNumericPatternEngine.CreateScienDecimal(i-1,g.ScienExpDigit);a.FormattedValue=l},CreateNumMask:function(a,b){a.FormattedValue=ISNumericPatternEngine.CreateNumericMaskData(a.FormattedValue,b.Number)},CreatePercentMask:function(f){var a=f.Data;var g=f.NumInfo;var j=a.FormattedValue;var d,c;if(j.indexOf("(")>-1||j.indexOf("-")>-1){d=g.Percent.Negative.DecimalSeparator;c=ISNumericPatternEngine.GetDecimalDigit(f,g.Percent.Negative)}else{d=g.Percent.Positive.DecimalSeparator;c=ISNumericPatternEngine.GetDecimalDigit(f,g.Percent.Positive)}var h=(d!="")?j.indexOf(d):-1;if(h>-1){var b=j.substr(h+1);j=j.substr(0,h);var e=0;do{if(b!=""){j=j+b.substr(0,1);b=b.substr(1)}else{j=j+"0"}h=h+1;e++}while(e<2);while(b.length<c){b=b+"0"}j=ISNumericPatternEngine.RemoveLeadZero(j);if(parseFloat(j)==0||j==""){j="0"}j=j+d+b}else{if(parseFloat(j)!=0){j=j+"00"}}a.FormattedValue=j;a.FormattedValue=ISNumericPatternEngine.CreateNumericMaskData(a.FormattedValue,g.Percent)},RemoveNumericMask:function(c,f){var h,g;h=ISNumericPatternEngine.GetNumericType(c.Format,f);g=ISNumericPatternEngine.GetNumberPattern(c.NewValue,h);var l=g.Pattern.replace(new RegExp("[\\(\\)\\-\\sn]","g"),"");if(l=="^"){l="\\"+l}var m=l==""?c.NewValue:c.NewValue.replace(new RegExp("["+l+"]","g"),"");var j="\\(\\)\\-\\s"+EscapeRegExpSpecialChar(g.GroupSeparator);if(c.PromptChar!=null&&c.PromptChar!=""){j+="\\"+c.PromptChar}m=m.replace(new RegExp("["+j+"]+","g"),"").toLowerCase();m=m.replace(h.Symbol.toLowerCase(),"");var i,e,d="";if(c.Format=="e"){if(m.indexOf("e")>-1){e=ISNumericPatternEngine.RemoveLeadZero(m.substr(0,m.indexOf("e")));d=m.substr(m.indexOf("e")+1,m.length-m.indexOf("e")-1);if(e.indexOf(g.DecimalSeparator)>-1){i=(g.DecimalSeparator!=null&&g.DecimalSeparator!="")?(e.length-e.indexOf(g.DecimalSeparator)-1):0;if(i<0){i=0}}else{i=0}e=e.replace(g.DecimalSeparator,"");if(c.NewValue.indexOf("(")>-1||c.NewValue.indexOf("-")>-1){d="-"+d.toString()}d=(parseFloat(d)-i);if(d>=0){d=(d!=0)?Math.pow(10,d):1;m=(parseFloat(e)*d).toString()}else{var k="";for(var b=d;b<0;b++){k=k+"0"}if(e.length>k.length){m=e.substr(0,e.length-k.length)+g.DecimalSeparator+e.substr(e.length-k.length)}else{if(e.length==k.length){m="0"+g.DecimalSeparator+e.toString()}else{m="0"+g.DecimalSeparator+k.substr(0,k.length-e.length)+e.toString()}}}}}else{i=(g.DecimalSeparator=="")?-1:m.indexOf(g.DecimalSeparator);if(i>-1){e=m.substr(0,i);d=m.substr(i+1,m.length-i-1)}else{e=m}if(parseFloat(e)==0||e==""){e="0"}else{e=ISNumericPatternEngine.RemoveLeadZero(e)}d=ISNumericPatternEngine.RemoveBackZero(d);if(c.Format=="p"){if(c.NewValue.toLowerCase().indexOf(h.Symbol.toLowerCase())>-1){while(e.length<2){e="0"+e}d=e.substr(e.length-2,2)+d;e=e.replace(new RegExp(".{2}$"),"");if(parseFloat(e)==0||e==""){e="0"}}}if(isNaN(e)||e==""){m=""}else{if(isNaN(d)||d==""){m=e}else{m=e+g.DecimalSeparator+d}}}if(((c.NewValue.indexOf("(")>-1&&c.NewValue.indexOf(")")>-1)||c.NewValue.indexOf("-")>-1)&&m.length>-1){if(c.NewValue.toLowerCase().indexOf("e-")<0){m="-"+m}}c.FormattedValue=TrimLiteralMarkerFromValue(m);return c.FormattedValue},RemoveLeadZero:function(a){return a.replace(new RegExp("^0*"),"")},RemoveBackZero:function(a){return a.replace(new RegExp("0*$"),"")},CreateZeroDigit:function(c){var d="";for(var b=0;b<c;b++){d+="0"}return d},CreateScienDecimal:function(a,b){a=Math.abs(a).toString();while(a.length<b){a="0"+a}return a},CheckNumericKey:function(b,a,c){return ISNumericPatternEngine.IsNumeric(b,ISNumericPatternEngine.GetAdditionalValidChars(a,c))},GetAdditionalValidChars:function(b,c){var a;var e,d;e=ISNumericPatternEngine.GetNumericType(b.Format,c);a=e.Symbol;d=e.Positive;a+=d.GroupSeparator+d.DecimalSeparator;d=e.Negative;a+=d.GroupSeparator+d.DecimalSeparator+d.Pattern.replace("n","").replace("$","").replace("%","").replace(new RegExp("\\s*","g"),"")+"-\\+";if(b.Format=="e"){a+="e\\+"}return a},IsNumeric:function(b,a){var c="0123456789-"+a;if(b.keyCode.length==0){return false}if(this.ArrkeyCode==null){this.ArrkeyCode=CreateArrayKey()}key=GetCharFromKeyCode(b,this.ArrkeyCode);return(c.indexOf(key)==-1)?false:true},IsValidNumericChar:function(b,m){var p="0123456789"+ISNumericPatternEngine.GetAdditionalValidChars(b,m);p=p.replace(new RegExp("-","g"),"\\-").replace(new RegExp("\\(","g"),"\\(").replace(new RegExp("\\)","g"),"\\)").replace(new RegExp("%","g"),"\\%").replace(new RegExp("\\$","g"),"\\$").replace(new RegExp("\\,","g"),"\\,").replace(new RegExp("\\.","g"),"\\.")+"\\s";if(b.PromptChar!=null&&b.PromptChar!=""){var n=ISNumericPatternEngine.GetNumericType(b.Format,m);var f=n.Positive.DecimalSeparator;var h=-1;if(f!=null){f=f.replace(new RegExp("\\s"),"");if(f!=""){h=b.NewValue.indexOf(f)}}else{f=""}var e,d,l,k;if(h>-1){e=b.NewValue.substr(0,h);d=b.NewValue.substr(h+1)}else{e=b.NewValue;d=""}l=k="";var a="";var j=false;for(var g=0;g<e.length;g++){a=e.charAt(g);if(!isNaN(parseFloat(a))){l+=a;j=true}else{if(j){l+=a==b.PromptChar?"0":a}else{l+=a}}}j=false;for(var g=d.length-1;g>-1;g--){a=d.charAt(g);if(!isNaN(parseFloat(a))){k=a+k;j=true}else{if(j){k=(a==b.PromptChar?"0":a)+k}else{k=a+k}}}b.NewValue=l;if(h>-1){b.NewValue+=n.Positive.DecimalSeparator+k}p+="\\"+b.PromptChar}var o=new RegExp("^["+p+"]+$","img");return(b.NewValue.match(o)!=null)},IsNotZeroFormatValue:function(a,b){var c=a.FormattedValue.replace(new RegExp("[^\\d]+","g"),"");if(parseFloat(c)==0||isNaN(c)==true||c==""){numType=ISNumericPatternEngine.GetNumericType(a.Format,b);if(numType.ZeroPattern!="0"){a.FormattedValue=numType.ZeroPattern;return false}else{return true}}else{return true}}};function ISDateTimePattern(a,b){this.Data=a;this.DateInfo=b;this.CreatePattern=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.DateInfo!=d){this.DateInfo=d}return ISDateTimePatternEngine.CreateDatetimePattern(this.Data,this.DateInfo)};this.ValidateData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.DateInfo!=d){this.DateInfo=d}return ISDateTimePatternEngine.ValidateDateTime(this.Data,this.DateInfo)};this.MaskData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.DateInfo!=d){this.DateInfo=d}return ISDateTimePatternEngine.MaskDateTime(this.Data,this.DateInfo)};this.UnMaskData=function(c,d){if(c!=null&&this.Data!=c){this.Data=c}if(d!=null&&this.DateInfo!=d){this.DateInfo=d}return ISDateTimePatternEngine.UnMaskDateTime(this.Data,this.DateInfo)}}var ISDateTimePatternEngine={CreateDatetimePattern:function(b,c){var d="FfDdTtmygG";if(b.Format=="M"||b.Format=="Y"){b.Format=b.Format.toLowerCase()}if(b.Format.length==1&&d.indexOf(b.Format)>-1){ISDateTimePatternEngine.GetFullDateFormat(b,c)}else{b.Format=b.Format.replace(new RegExp("/","g"),c.DateSeparator).replace(new RegExp(":","g"),c.TimeSeparator)}b.Pattern=ISDateTimePatternEngine.GetDateTimePattern(b.Format,c,b);if(b.AllPattern==null){var a=new Array();var e=c.StandarFormat;a[0]=new Array(e.FullDateTime,ISDateTimePatternEngine.GetDateTimePattern(e.FullDateTime,c,b));a[1]=new Array(e.FullDateTimeShortTime,ISDateTimePatternEngine.GetDateTimePattern(e.FullDateTimeShortTime,c,b));a[2]=new Array(e.LongDate,ISDateTimePatternEngine.GetDateTimePattern(e.LongDate,c,b));a[3]=new Array(e.ShortDate,ISDateTimePatternEngine.GetDateTimePattern(e.ShortDate,c,b));a[4]=new Array(e.LongTime,ISDateTimePatternEngine.GetDateTimePattern(e.LongTime,c,b));a[5]=new Array(e.ShortTime,ISDateTimePatternEngine.GetDateTimePattern(e.ShortTime,c,b));a[6]=new Array(e.MonthDay,ISDateTimePatternEngine.GetDateTimePattern(e.MonthDay,c,b));a[7]=new Array(e.YearMonth,ISDateTimePatternEngine.GetDateTimePattern(e.YearMonth,c,b));a[8]=new Array(e.GeneralShortTime,ISDateTimePatternEngine.GetDateTimePattern(e.GeneralShortTime,c,b));a[9]=new Array(e.GeneralLongTime,ISDateTimePatternEngine.GetDateTimePattern(e.GeneralLongTime,c,b));a[10]=new Array("MMMM dd, yyyy",ISDateTimePatternEngine.GetDateTimePattern("MMMM dd, yyyy",c,b));a[11]=new Array("MMMM dd yyyy",ISDateTimePatternEngine.GetDateTimePattern("MMMM dd yyyy",c,b));a[12]=new Array("dd MMMM yyyy",ISDateTimePatternEngine.GetDateTimePattern("dd MMMM yyyy",c,b));a[13]=new Array("MM/dd/yyyy",ISDateTimePatternEngine.GetDateTimePattern("MM/dd/yyyy",c,b));a[14]=new Array("ddd MMM dd yyyy HH:mm:ss",ISDateTimePatternEngine.GetDateTimePattern("ddd MMM dd yyyy HH:mm:ss",c,b));a[15]=new Array("M/d/yyyy HH:mm:ss",ISDateTimePatternEngine.GetDateTimePattern("M/d/yyyy HH:mm:ss",c,b));a[16]=new Array("M/d/yyyy hh:mm:ss tt",ISDateTimePatternEngine.GetDateTimePattern("M/d/yyyy hh:mm:ss",c,b));a[16][1]=a[16][1].replace("$","")+"\\s(AM|PM)\\s*$";a[17]=new Array("MMMM dd, yyyy","^\\s*(January|February|March|April|May|June|July|August|September|October|November|December|)\\s*\\s\\s*(0?\\d|[0-2]\\d|3[0-1])\\s*\\,\\s*\\s*\\s\\s*(\\d{1,4})\\s*$");a[18]=new Array("MMMM dd yyyy","^\\s*(January|February|March|April|May|June|July|August|September|October|November|December|)\\s*\\s\\s*(0?\\d|[0-2]\\d|3[0-1])\\s*\\s\\s*(\\d{1,4})\\s*$");a[19]=new Array("dd MMMM yyyy","^\\s*(0?\\d|[0-2]\\d|3[0-1])\\s*\\s\\s*(January|February|March|April|May|June|July|August|September|October|November|December|)\\s*\\s\\s*(\\d{1,4})\\s*$");a[20]=new Array("ddd MMM dd yyyy HH:mm:ss","^\\s*(Sun|Mon|Tue|Wed|Thu|Fri|Sat)\\s*\\s\\s*(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec||)\\s*\\s\\s*(0?\\d|[0-2]\\d|3[0-1])\\s*\\s\\s*(\\d{1,4})\\s*\\s\\s*(0?\\d|1\\d|2[0-3])\\s*\\:\\s*(\\d|[0-4]\\d|5[0-9])\\s*\\:\\s*(\\d|[0-4]\\d|5[0-9])\\s*$");a[21]=new Array("ddd, dd MMM yyyy HH:mm:ss",ISDateTimePatternEngine.GetDateTimePattern("ddd, dd MMM yyyy HH:mm:ss",c,b));b.AllPattern=a}return b.Pattern},ValidateDateTime:function(c,d){if((c!=null&&c!=c)||(d!=null&&d!=d)){if(c.Pattern==null||c.Pattern==""||c.AllPattern==null||c.AllPattern==""){ISDateTimePatternEngine.CreateDateTimePattern(c,d)}}c.IsValid=false;if(c.NewValue==null||c.NewValue==""){c.NewValue=ISDateTimePatternEngine.GetDefaultDateTime(d);c.MatchDateFormat=d.StandarFormat.ShortDate;c.IsValid=true}else{var i=new RegExp(c.Pattern,"img");result=c.NewValue.match(i);if(result==null){c.NewValue=c.NewValue.replace(new RegExp("^\\s*"),"").replace(new RegExp("\\s*$"),"");result=c.NewValue.match(i);if(result==null){if(c.CommonFormatPriority){for(var b=10;b<21;b++){i=new RegExp(c.AllPattern[b][1],"img");result=c.NewValue.match(i);if(result!=null){c.MatchDateFormat=c.AllPattern[b][0];c.IsValid=true;break}}}if(!c.IsValid){var f=false;for(var h in d.StandarFormat){if(d.StandarFormat[h]=="dd/MM/yyyy HH:mm:ss"||d.StandarFormat[h]=="d/M/yyyy HH:mm:ss"){f=true;break}}var g=true;var j=f==true?c.AllPattern.length-1:0;var e=j;while(g){i=new RegExp(c.AllPattern[e][1],"img");result=c.NewValue.match(i);if(result!=null){c.MatchDateFormat=c.AllPattern[e][0];c.IsValid=true;g=false;break}e+=f==true?-1:1;if(e>=c.AllPattern.length||e<0){g=false}}}if(!c.IsValid){i=new RegExp("^\\d{1,2}\\s*[^:\\d]{1}\\s*\\d{1,2}\\s*[^:\\d]{1}\\s*(\\d{2}|\\d{4})(\\s+\\d{1,2}:\\d{1,2})?$","img");result=c.NewValue.match(i);if(result!=null){c.MatchDateFormat=ISDateTimePatternEngine.ParseNonStandarShortDate(c,d);if(c.MatchDateFormat==""||c.MatchDateFormat==null){c.IsValid=false}else{c.IsValid=true}}}}else{c.MatchDateFormat=c.Format;c.IsValid=true}}else{c.MatchDateFormat=c.Format;c.IsValid=true}}if(c.IsValid){ISDateTimePatternEngine.ValidateSymanticDateTime(c,d)}else{c.FormattedValue=""}return c.IsValid},ValidateSymanticDateTime:function(a,b){ISDateTimePatternEngine.AssignRealDateData(a,b);var f=true,c,h,i,d,e;c=a.DateData.Day;h=a.DateData.Month;i=a.DateData.Year;d=a.DateData.Hour12;e=a.DateData.Hour24;if(h!=null){if(h>=0&&h<=11){if(c!=null){var g=ISDateTimePatternEngine.GetMaxDay(h,i);c=parseFloat(c);if(c<1||c>g){f=false}}}else{f=false}}if(d!=null){d=parseFloat(d);if(d<1||d>12){f=false}}if(e!=null){e=parseFloat(e);if(e<0||e>23){f=false}}if(a.IsValid==false){a.FormattedValue=""}a.IsValid=f;return f},MaskDateTime:function(c,d){if(c.MatchDateFormat==null||c.MatchDateFormat==""){if(ISDateTimePatternEngine.ValidateDateTime(c,d)==false){return""}}var e=c.Format.indexOf("'")>-1?c.Format:(c.RawFormat==null?c.Format:c.RawFormat);var l=new Array();if(e.indexOf("'")>-1){var o=new RegExp("\\'(\\s(.+?\\s)+?)\\'");var k=true;while(k){var j=o.exec(e);if(j==null){k=false}else{l.push(j[1]);e=e.replace(o,"*SPACE*")}}}if(c.DateData==null){ISDateTimePatternEngine.AssignRealDateData(c,d)}var p=ISDateTimePatternEngine.GetDateTimeDefaultSeparatorFormat(d);var f="";var r="",q,n;var h=0;var s="";c.FormattedData=new Array();for(var b=0;b<e.length;b++){q=e.charAt(b);if(p.indexOf(q)>-1||(b+1)==e.length||"dMyghHmsftz".indexOf(q)<0||(r.length>0&&r.indexOf(q)<0)){if((b+1)==e.length&&"dMyghHmsftz".indexOf(q)>-1){if(r!=""){if(r.indexOf(q)>-1){r=r+q;q=""}}else{r=q;q=""}}s=ISDateTimePatternEngine.GetMaskDateTimeData(r,c,d);if(r!=""){c.FormattedData[h]=new Array();c.FormattedData[h][0]=r;c.FormattedData[h][1]=s;h++}f=f+s;if("dMyghHmsftz".indexOf(q)<0||q==""){f=f+q;r=""}else{if(r.indexOf(q)<0){r=q}if((b+1)==e.length){f=f+ISDateTimePatternEngine.GetMaskDateTimeData(r,c,d)}}}else{r+=q}}c.FormattedValue=TrimLiteralMarkerFromValue(f);for(var g=0;g<l.length;g++){c.FormattedValue=c.FormattedValue.replace(new RegExp(/\*SPACE\*/),l[g])}return c.FormattedValue},UnMaskDateTime:function(a,b){if(a.IsValid){a.FormattedValue=a.NewValue}else{a.FormattedValue=""}return a.FormattedValue},GetMaskDateTimeData:function(c,a,b){var d;switch(c.charAt(0)){case"d":d=ISDateTimePatternEngine.GetDayData(c,a.DateData.Day,a,b);break;case"M":d=ISDateTimePatternEngine.GetMonthData(c,a.DateData.Month,b);break;case"y":d=ISDateTimePatternEngine.GetYearData(c,a.DateData.Year);break;case"g":d=a.DateData.Period;break;case"h":d=ISDateTimePatternEngine.Get2DigitData(c,a.DateData.Hour12);break;case"H":d=ISDateTimePatternEngine.Get2DigitData(c,a.DateData.Hour24);break;case"m":d=ISDateTimePatternEngine.Get2DigitData(c,a.DateData.Minute);break;case"s":d=ISDateTimePatternEngine.Get2DigitData(c,a.DateData.Second);break;case"f":d=ISDateTimePatternEngine.GetFractionData(c,a.DateData.Fraction);break;case"t":d=ISDateTimePatternEngine.GetDesignatorData(c,a.DateData,b);break;case"z":d=ISDateTimePatternEngine.GetTimeZoneOffsetData(c,a.DateData.TimeZoneOffset);break;default:d=c}return d},AssignRealDateData:function(d,g){var h,o,y,l,m,n,r,p,k,i,w;var s=ISDateTimePatternEngine.GetDateTimeDefaultSeparatorFormat(g);var u="",t,q;var x=d.NewValue,v;var j=d.MatchDateFormat;for(var b=0;b<j.length;b++){t=j.charAt(b);if(s.indexOf(t)>-1||(b+1)==j.length||"dMyghHmsftz".indexOf(t)<0){if(x.indexOf(t)>-1){q=x.indexOf(t);v=x.substr(0,q);x=x.substr(q+1,x.length-q-1)}else{v=x;x=""}if(u.length==0){u=t}v=v.replace(new RegExp("\\s*","g"),"");switch(u.charAt(0)){case"d":if(isNaN(v)==false){h=v}break;case"M":o=v;break;case"y":y=parseFloat(v);break;case"g":p=v;break;case"h":l=parseFloat(v);break;case"H":m=parseFloat(v);break;case"m":n=parseFloat(v);break;case"s":r=parseFloat(v);break;case"f":k=parseFloat(v);break;case"t":i=v;break;case"z":w=v;break}u=""}else{u+=t}if(x.length<=0){break}}var f=d.DateData;if(f==null){f=new ISDateData()}var e=new Date();if(h==null){h=e.getDate()}if(o==null){o=e.getMonth()}else{if(isNaN(o)){for(var b=0;b<g.AbbreviatedMonthNames.length;b++){if(o.toLowerCase()==g.AbbreviatedMonthNames[b].toLowerCase()){o=b;break}}if(isNaN(o)){for(var b=0;b<g.MonthNames.length;b++){if(o.toLowerCase()==g.MonthNames[b].toLowerCase()){o=b;break}}if(isNaN(o)){var c=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");for(var b=0;b<c.length;b++){if(o.toLowerCase()==c[b].toLowerCase()){o=b;break}}if(isNaN(o)){c=new Array("January","February","March","April","May","June","July","August","September","October","November","December");for(var b=0;b<c.length;b++){if(o.toLowerCase()==c[b].toLowerCase()){o=b;break}}}}}}else{o=parseFloat(o)-1}}if(y==null){y=e.getFullYear()}else{var z=y.toString();if(z.length==2){y=parseFloat((parseFloat(y)>=70?"19":"20")+z)}else{if(z.length==1){y=parseFloat("200"+z)}}}if(l==null){if(m==null){m=e.getHours()}if(m>0&&m!=12){l=m-(m>11?12:0)}else{l=12}}else{if(l>12||l<1){l=1}if(i){if(i.toLowerCase()==g.AMDesignator.toLowerCase()){m=l<12?l:0}else{m=l<12?(l+12):0}}else{m=l}}if(i==null){i=m>11?g.PMDesignator:g.AMDesignator}if(n==null){n=e.getMinutes()}if(r==null){r=e.getSeconds()}if(p==null){p=g.EraName}if(k==null){k=e.getMilliseconds()}if(i==null){i=m>11?g.PMDesignator:g.AMDesignator}if(w==null){w=e.getTimezoneOffset()}f.Day=h;f.Month=o;f.Year=y;f.Hour12=l;f.Hour24=m;f.Minute=n;f.Second=r;f.Period=p;f.Fraction=k;f.Designator=i;f.TimeZoneOffset=w;d.DateData=f},GetFullDateFormat:function(a,b){var c=a.Format;var d=a.RawFormat;var e=b.StandarFormat;switch(c){case"F":c=e.FullDateTime;d=e.FullDateTimeRaw;break;case"f":c=e.FullDateTimeShortTime;d=e.FullDateTimeShortTimeRaw;break;case"D":c=e.LongDate;d=e.LongDateRaw;break;case"d":c=e.ShortDate;d=e.ShortDateRaw;break;case"T":c=e.LongTime;d=e.LongTimeRaw;break;case"t":c=e.ShortTime;d=e.ShortTimeRaw;break;case"m":c=e.MonthDay;d=e.MonthDayRaw;break;case"y":c=e.YearMonth;d=e.YearMonthRaw;break;case"g":c=e.GeneralShortTime;d=e.GeneralShortTimeRaw;break;case"G":c=e.GeneralLongTime;d=e.GeneralLongTimeRaw;break}a.Format=c;a.RawFormat=d},GetDateTimePattern:function(e,d,c){var f="",i="",h,j;var g=ISDateTimePatternEngine.GetDateTimeDefaultSeparatorFormat(d);if(e.charAt(0)=="%"){e=e.replace("%","")}for(var b=0;b<e.length;b++){h=e.charAt(b);if(g.indexOf(h)>-1||(b+1)==e.length||(i.length>0&&i.indexOf(h)<0)){if((b+1)==e.length&&"dMyghHmsftz".indexOf(h)>-1){if(i!=""){if(i.indexOf(h)>-1){i=i+h;h=""}}else{i=h;h=""}}j=ISDateTimePatternEngine.GetDateTimePatternFromSpecifier(i,d,c);if(j==""){j=EscapeRegExpSpecialChar(i)}else{if(j=="ConvertToBlankString"){j="";if(f.length>0){f=f.substr(0,f.length-2)}}}f=f+"\\s*"+j+"\\s*";if("dMyghHmsftz".indexOf(h)<0||h==""){f=f+EscapeRegExpSpecialChar(h);i=""}else{if(i.indexOf(h)<0){i=h}if((b+1)==e.length){j=ISDateTimePatternEngine.GetDateTimePatternFromSpecifier(i,d,c);if(j==""){j=EscapeRegExpSpecialChar(i)}f=f+"\\s*"+j}}}else{i+=h}}return"^"+f+"$"},GetDateTimeDefaultSeparatorFormat:function(a){var b;b=a.DateSeparator+a.TimeSeparator+" ,";return b},GetDateTimePatternFromSpecifier:function(c,b,a){var e=c.charAt(0),d="";switch(e){case"d":d=ISDateTimePatternEngine.GetDayPattern(c,b);break;case"M":d=ISDateTimePatternEngine.GetMonthPattern(c,b);break;case"y":d=ISDateTimePatternEngine.GetYearPattern(c,a);break;case"g":d=ISDateTimePatternEngine.GetPeriodPattern(c);break;case"h":d=ISDateTimePatternEngine.Get12HoursPattern(c,a);break;case"H":d=ISDateTimePatternEngine.Get24HoursPattern(c,a);break;case"m":d=ISDateTimePatternEngine.Get60Pattern(c.length,a);break;case"s":d=ISDateTimePatternEngine.Get60Pattern(c.length,a);break;case"f":d=ISDateTimePatternEngine.GetFractionPattern(c);break;case"t":d=ISDateTimePatternEngine.GetDesignatorPattern(c,b);break;case"z":d=ISDateTimePatternEngine.GetTimeZoneOffsetPattern(c);break}return d},GetDayPattern:function(d,c){var e;switch(d.length){case 1:case 2:e="(0?\\d|[0-2]\\d|3[0-1])";break;case 3:e="(";for(var b=0;b<c.AbbreviatedDayNames.length;b++){e+=c.AbbreviatedDayNames[b]+"|"}e=e.substr(0,e.length-1);e+=")";break;default:e="(";for(var b=0;b<c.DayNames.length;b++){e+=c.DayNames[b]+"|"}e=e.substr(0,e.length-1);e+=")";break}return e},GetMonthPattern:function(d,c){var e;switch(d.length){case 1:case 2:e="(0?\\d|1[0-2])";break;case 3:e="(";for(var b=0;b<c.AbbreviatedMonthNames.length;b++){e+=c.AbbreviatedMonthNames[b]+"|"}e+=")";break;default:e="(";for(var b=0;b<c.MonthNames.length;b++){e+=c.MonthNames[b]+"|"}e=e.substr(0,e.length-1);e+=")";break}return e},GetYearPattern:function(b,a){var c;var d=a.PromptChar;switch(b.length){case 1:c="\\d{0,1}\\d{1}";break;case 2:c="\\d{1,2}";break;default:c="(\\d{1,4})";break}return c},GetPeriodPattern:function(a){return".{2,}"},Get12HoursPattern:function(b,a){var c;if(b.length<=2){c="(0?\\d|1[0-2])"}else{c="(0?\\d|0{0,"+(b.length-2)+"}1[0-2])"}return c},Get24HoursPattern:function(b,a){var c;if(b.length<=2){c="(0?\\d|1\\d|2[0-3])"}else{c="(0?\\d|0{0,"+(b.length-2)+"}(1\\d|2[0-3]))"}return c},GetFractionPattern:function(a){return"\\d{"+a.length+"}"},GetDesignatorPattern:function(b,a){var c;if(b.length==1){c="("+a.AMDesignator.charAt(0)+"|"+a.PMDesignator.charAt(0)+")"}else{c="("+EscapeRegExpSpecialChar(a.AMDesignator)+"|"+EscapeRegExpSpecialChar(a.PMDesignator)+")"}if(c=="(|)"){c="ConvertToBlankString"}return c},GetTimeZoneOffsetPattern:function(a){var b;switch(a.length){case 1:b="(\\+(\\d|1[0-3])|\\-(\\d|1[0-2]))";break;case 2:b="(\\+([0-1][0-3])|\\-([0-1][0-2]))";break;default:b="(\\+([0-1][0-3])|\\-([0-1][0-2]))\\:\\d{2}"}return b},Get60Pattern:function(b,a){return"(\\d|[0-4]\\d|5[0-9])"},GetMaxDay:function(c,d){var a=new Array(31,28,31,30,31,30,31,31,30,31,30,31);var b;if(ISDateTimePatternEngine.IsLeapYear(d)){a[1]=29}if(parseFloat(c)<12){b=a[parseFloat(c)]}else{b=32}return b},IsLeapYear:function(c){if(c!=null){if(c.toString().length==2){if(parseFloat(c)>=70){c="19"+c.toString()}else{c="20"+c.toString()}}}else{var a=new Date();c=a.getFullYear()}c=parseFloat(c);var b=false;if((c%4)==0){if((c%100)==0){if((c%400)==0){b=true}}else{b=true}}return b},GetDayData:function(f,g,c,e){var i;if(isNaN(g)){var h;for(var b=0;b<e.AbbreviatedDayNames.length;b++){if(e.AbbreviatedDayNames[b]==g){h=b+1;break}}if(h==null){for(var b=0;b<e.DayNames.length;b++){if(e.DayNames[b]==g){h=b+1;break}}}g=h}else{g=parseFloat(g)}if(f.length<=2){i=ISDateTimePatternEngine.Get2DigitData(f,g)}else{var d=new Date(c.DateData.Year,parseFloat(c.DateData.Month),c.DateData.Day);g=d.getDay();if(f.length==3){for(var b=0;b<e.AbbreviatedDayNames.length;b++){if(b==g){i=e.AbbreviatedDayNames[b];break}}}else{for(var b=0;b<e.DayNames.length;b++){if(b==g){i=e.DayNames[b];break}}}}return i},GetMonthData:function(d,e,c){var f;e=parseFloat(e);switch(d.length){case 1:case 2:f=ISDateTimePatternEngine.Get2DigitData(d,e+1);break;case 3:for(var b=0;b<c.AbbreviatedMonthNames.length;b++){if(b==e){f=c.AbbreviatedMonthNames[b];break}}break;default:for(var b=0;b<c.MonthNames.length;b++){if(b==e){f=c.MonthNames[b];break}}break}return f},GetYearData:function(c,a){var d;a=a.toString();if(c.length<=2){d=(a.length>2)?a.substr(a.length-2,2):a;d=ISDateTimePatternEngine.Get2DigitData(c,d)}else{if(a.length<=2){var b=new Date();var e=b.getFullYear();e=e.toString();a=e.substr(0,e.length-a.length)+a}d=a}return d},GetFractionData:function(d,c){var e;c=c.toString();if(d.length<=3){e=c.substr(0,d.length)}else{e=c;for(var b=d.length;b>3;b--){e=e+"0"}}return e},GetDesignatorData:function(d,b,c){var a=b.Designator;if(a==null){a=b.hour24>11?c.PMDesignator:c.AMDesignator}return d.length==1?a.charAt(1):a},GetTimeZoneOffsetData:function(c,a){if(isNaN(parseFloat(a))){a=0}var d=new String(parseFloat(a)/60);var f,b,e=d.replace("-","").replace("+","");b=(c.length>2)?"zz":c;f=ISDateTimePatternEngine.Get2DigitData(b,e);f=((d>0)?"+":"-")+f;if(c.length>2){f=f+":00"}return f},Get2DigitData:function(b,a){var c;if(b.length==1){if(a.toString().length==2){c=a.toString().replace(new RegExp("^0*"),"")}else{c=a}}else{c=a;if(a.toString().length==1){c="0"+c}}return c},GetDefaultDateTime:function(c){var e=c.StandarFormat.ShortDate;var f=ISDateTimePatternEngine.GetDateTimeDefaultSeparatorFormat(c);var g="",h="",i="";var d=new Date();for(var b=0;b<e.length;b++){g=e.charAt(b);if(f.indexOf(g)>-1||(b+1)==e.length||"dMy".indexOf(g)<0||(h.length>0&&h.indexOf(g)<0)){if(h==""){h=g}switch(h.charAt(0)){case"d":i=i+d.getDate();break;case"M":i=i+(d.getMonth()+1);break;case"y":i=i+d.getFullYear();break}if("dMy".indexOf(g)>-1){g=""}i=i+g;h=""}else{h=h+g}}return i},ParseNonStandarShortDate:function(e,f){var n=e.NewValue;var m="",i=0,c,g=f.DateSeparator;for(c=0;c<n.length;c++){if("0123456789".indexOf(n.charAt(c))<0){if(i==2){break}m=m+g;i++}else{m=m+n.charAt(c)}}var h,j,o;var k=f.StandarFormat.ShortDate;k=k.replace(new RegExp("[^dMy]+","g"),"");k=k.replace(new RegExp("d+","g"),"d").replace(new RegExp("M+","g"),"M").replace(new RegExp("y+","g"),"y");for(var d=0;d<3;d++){switch(k.charAt(d)){case"d":h=(d==0)?m.substr(0,m.indexOf(g)):((d==1)?m.substr(m.indexOf(g)+1,m.lastIndexOf(g)-m.indexOf(g)-1):m.substr(m.lastIndexOf(g)+1));break;case"M":j=(d==0)?m.substr(0,m.indexOf(g)):((d==1)?m.substr(m.indexOf(g)+1,m.lastIndexOf(g)-m.indexOf(g)-1):m.substr(m.lastIndexOf(g)+1));break;case"y":o=(d==0)?m.substr(0,m.indexOf(g)):((d==1)?m.substr(m.indexOf(g)+1,m.lastIndexOf(g)-m.indexOf(g)-1):m.substr(m.lastIndexOf(g)+1));break}}if(parseFloat(j)>12){var l=j;j=h;h=l;k=k.replace("M","x");k=k.replace("d","M");k=k.replace("x","d")}if(parseFloat(j)<=12&&parseFloat(h)<=31){k=k.charAt(0)+g+k.charAt(1)+g+k.charAt(2);matchDateFormat=k.replace("y","yy")+" H:m";m=m+n.substr(c,n.length-c);e.NewValue=m;return matchDateFormat}else{return""}}};if(typeof(Sys)!="undefined"){Sys.Application.notifyScriptLoaded()};