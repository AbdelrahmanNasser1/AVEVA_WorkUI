
// Generated by Intersoft Script Optimizer V1.5 + Intersoft JS Engine MaxObfuscate(tm) V1.0 
// Generated Datetime : 12/7/2005 1:44:21 PM
// Copyright (c) 2005 Intersoft Solutions.
// Unauthorized decryption/reproduction of any codes contained herein is strictly prohibited and will result in severe civil and criminal penalties .
//**Start Encode**
function wgActiveCell(vb1475,v95493,v14227){ this.element =v14227; this.tblName =v95493; this.gridId =vb1475; if (v14227) this.cellIndex =v14227.cellIndex; this.rowElement =null; this.rowChanged =false; this.GetColSetRowElement =function() { var v86f75 =wgGetGridById(this.gridId); var v13393 =v86f75.Tables[this.tblName]; if (v13393.IsUseColumnSet) { return wgGetColumnSetRow(this.element); } return null; }; this.GetColSetRowsElement =function() { var v86f75 =wgGetGridById(this.gridId); var v13393 =v86f75.Tables[this.tblName]; if (v13393.IsUseColumnSet) { return wgGetColumnSetRows(this.element); } return null; }; return this;}function wgSetLastAEC(v6ae10){ var v98787 =wg38213.m88693(v6ae10); var vc2260 =ISGetObject(v98787.gridId); var vccd22 =vc2260.Tables[v98787.tblName]; if (vccd22.LastAECIndex !=-1) { if (v6ae10.cells.length >vccd22.LastAECIndex) { var vf4a55 =v6ae10.cells[vccd22.LastAECIndex]; if (vf4a55.type =="Cell" ||vf4a55.type =="FilterColumn") wg9c911.m96a77(vf4a55); else wg9c911.m15b94(v6ae10); } } else  { wg9c911.m15b94(v6ae10); }}function wgGetFirstEditableCell(vb1977){ if (wgIsColumnSetRow(vb1977))return wgGetCSFirstEditableCell(vb1977);  var v07110 =wg38213.m88693(vb1977); var va9f54 =ISGetObject(v07110.gridId); var v61b21 =va9f54.Tables[v07110.tblName]; var v9c168 =v61b21.GetElement(WG40.COLHEADER,WG40.HTMLTABLE,vb1977).cells; var v8b77 =-1; for (var v4d914=0; v4d914<v9c168.length; v4d914++) { wg38213.m79d94(v9c168[v4d914]); if (v9c168[v4d914].type =="Column") { var va0467 =v61b21.Columns.GetNamedItem(v9c168[v4d914].colName);  if (wgIsFilterRow(vb1977)) { if (v61b21.GetFilterEditType(v9c168[v4d914].colName)!="NoEdit") { v8b77 =v4d914; break; } } else  { if (va0467.EditType !="NoEdit" &&(v4d914 <vb1977.cells.length &&vb1977.cells[v4d914].noEdit !="True")) { v8b77 =v4d914; break; } } } } return v8b77;}function wgGetNextEditableRow(v49967,v7778){ var vefe77 =wgGetNextVisibleRow(v49967,v7778); if (vefe77) { while (!(vefe77 &&vefe77.element &&!vefe77.element.noEdit)) vefe77 =wgGetNextVisibleRow(v49967,vefe77.element); } return vefe77;}function wgGetPrevEditableRow(v76b12,vb6095){ var v45267 =wgGetPrevVisibleRow(v76b12,vb6095); if (v45267) { while (!(v45267 &&v45267.element &&!v45267.element.noEdit)) v45267 =wgGetPrevVisibleRow(v76b12,v45267.element); } return v45267;}function wgGetNextEditableCell(v5de3,v8409){ var v78b12 =v5de3.parentElement; if (!v78b12)v78b12 =v8409; var vf9095 =false; if (wgIsColumnSetRow(v78b12)) { var vd1f12 =wgGetCSNextEditableCell(v5de3,v78b12); if (vd1f12 &&vd1f12.rowElement) { if (vd1f12.rowElement.type !="GroupHeader" &&vd1f12.rowElement.type !="GroupTotalRow")return vd1f12; else vf9095 =true; } } var v12589 =wg38213.m88693(v78b12); var v75271 =ISGetObject(v12589.gridId); var vb4579 =v75271.Tables[v12589.tblName]; var v4680 =vb4579.GetElement(WG40.COLHEADER,WG40.HTMLTABLE,v78b12).cells; var v70d1 =-1; var v39357 =new wgActiveCell(v12589.gridId,v12589.tblName); if (!vf9095) { for (var v07b97=v5de3.cellIndex+1; v07b97<v4680.length; v07b97++) { wg38213.m79d94(v4680[v07b97]); if (v4680[v07b97].type =="Column") { var vb2a38 =vb4579.GetColumn(v4680[v07b97].colName); if (wgIsFilterRow(v78b12)) { if (vb4579.GetFilterEditType(v4680[v07b97].colName)!="NoEdit") { v70d1 =v07b97; break; } }else  { if (vb2a38.EditType !="NoEdit" &&(v07b97 <v78b12.cells.length &&v78b12.cells[v07b97].noEdit !="True")) { v70d1 =v07b97; break; } } } } } if (v70d1 ==-1) { var v5df99 =wgGetNextEditableRow(v12589,v78b12); if (v5df99 &&v5df99.element &&vb4579.Get("AllowEdit")=="Yes") { v39357.rowChanged =true; v39357.rowElement =v5df99.element; if (v5df99.element.type =="Record" ||v5df99.element.type =="NewRow") { v70d1 =wgGetFirstEditableCell(v5df99.element); if (typeof(v70d1)=="object") { v39357.element =v70d1; }else  { if (v70d1 ==-1)v70d1 =vb4579.LastAECIndex; if (v70d1 >=v5df99.element.cells.length)v70d1 =v5df99.element.cells.length-1; v39357.element =v5df99.element.cells[v70d1]; } v39357.cellIndex =v39357.element.cellIndex; }else  { v70d1 =0; v39357.element =null; v39357.cellIndex =null; } } }else  { v39357.rowElement =v78b12; v39357.element =v78b12.cells[v70d1]; v39357.cellIndex =v39357.element.cellIndex; } if (v70d1 ==-1) { v39357.element =v5de3; v39357.rowElement =v78b12; v39357.cellIndex =v39357.element.cellIndex; } return v39357;}function wgGetPrevEditableCell(v7b070,v27389){ var vf3d25 =v7b070.parentElement; if (!vf3d25)vf3d25 =v27389; if (wgIsColumnSetRow(vf3d25)) { var vd7e2 =wgGetCSPrevEditableCell(v7b070,vf3d25); if (vd7e2 &&vd7e2.rowElement) { if (vd7e2.rowElement.type !="GroupHeader")return vd7e2; } } var v3c398 =wg38213.m88693(vf3d25); var vfae77 =ISGetObject(v3c398.gridId); var v9b591 =vfae77.Tables[v3c398.tblName]; var ve8814 =v9b591.GetElement(WG40.COLHEADER,WG40.HTMLTABLE,vf3d25).cells; var v4da72 =-1; var v57f25 =new wgActiveCell(v3c398.gridId,v3c398.tblName); for (var vaba89=v7b070.cellIndex-1; vaba89>=0; vaba89--) { wg38213.m79d94(ve8814[vaba89]); if (ve8814[vaba89].type =="Column") { var veb259 =v9b591.Columns.GetNamedItem(ve8814[vaba89].colName); if (wgIsFilterRow(vf3d25)) { if (v9b591.GetFilterEditType(ve8814[vaba89].colName)!="NoEdit") { v4da72 =vaba89; break; } } else  { if (veb259.EditType !="NoEdit" &&(vaba89 <vf3d25.cells.length &&vf3d25.cells[vaba89].noEdit !="True")) { v4da72 =vaba89; break; } } } } if (v4da72 ==-1) { var v56352 =wgGetPrevEditableRow(v3c398,vf3d25); if (v56352 &&v56352.element &&v9b591.Get("AllowEdit")=="Yes") { v57f25.rowChanged =true; v57f25.rowElement =v56352.element; if (v56352.element.type =="Record" ||v56352.element.type =="NewRow") { if (v56352.element.type =="NewRow") v57f25.element =wgGetFirstEditableCell(v56352.element); else v57f25.element =wgGetLastEditableCell(v56352.element); if (v57f25.element) v4da72 =v57f25.element.cellIndex; else  { v4da72 =v9b591.LastAECIndex; v57f25.element =v56352.element.cells[v4da72]; } v57f25.cellIndex =v4da72; } else  { v4da72 =0; v57f25.element =null; v57f25.cellIndex =null; } } } else  { v57f25.rowElement =vf3d25; v57f25.element =vf3d25.cells[v4da72]; v57f25.cellIndex =v57f25.element.cellIndex; } if (v4da72 ==-1) { v57f25.element =v7b070; v57f25.rowElement =vf3d25; v57f25.cellIndex =v57f25.element.cellIndex; } return v57f25;}function wgGetLastEditableCell(v72e15){ if (wgIsColumnSetRow(v72e15))return wgGetCSLastEditableCell(v72e15); var v4b370 =wg38213.m88693(v72e15); var v74b89 =ISGetObject(v4b370.gridId); var vca396 =v74b89.Tables[v4b370.tblName]; var v0894 =vca396.GetElement(WG40.COLHEADER,WG40.HTMLTABLE,v72e15).cells; var va3e94 =-1; for (var vd4462=v0894.length-1; vd4462>=0; vd4462--) { wg38213.m79d94(v0894[vd4462]); if (v0894[vd4462].type =="Column") { var ve9b68 =vca396.Columns.GetNamedItem(v0894[vd4462].colName); if (ve9b68.EditType !="NoEdit" &&(vd4462 <v72e15.cells.length &&v72e15.cells[vd4462].noEdit !="True")){ va3e94 =vd4462; break; } } } if (va3e94 !=-1)return v72e15.cells[va3e94]; else return null;}function wgActiveCellValid(vda915,vb2b76){ if (vda915.ActiveEditCell) { if (wgIsSameRow(vda915.ActiveEditCell.element.parentElement,vb2b76)) { return true; } } return false;}function wgIsRowEditable(vdf815){ if (!vdf815)return false; if (wgIsColumnSetRow(vdf815)) { return wgGetColumnSetRow(vdf815).noEdit !="True"; } else  { return vdf815.noEdit !="True"; }}function wgGetUnMask(v1f626,v5d30,v54d47,vf7168,v52666){ var v14815 =v5d30.DataType; var v21d76; if (v52666)v21d76 =v52666; else v21d76 =v54d47.innerText; if (!v14815)return v21d76; if (wgIsFilterRow(v54d47.parentElement)) return v21d76; var v76f94 =v5d30.DataFormatString; var vb4f31 =new ISClientData(null,v14815,v76f94); v1f626.ValEngine.CheckType(vb4f31);  var v21f97 =vb4f31.Type; var v77a10 =v5d30.EditType; if (v21f97 =="number" &&v77a10 =="TextBox") { vb4f31.NewValue =v21d76; return v1f626.ValEngine.UnMask(vb4f31,v1f626.CultureInfo); } else if (v77a10 =="Checkbox") { return v54d47.childNodes[0].checked; } else  { if (v54d47.cellValue &&!vf7168) return v54d47.cellValue; else return v21d76; }}function wgGetMask(v61750,v01034,vf0d37,v66c2,v0f181){ var v0a216; var vfdb74; if (v01034) { v0a216 =v01034.cellElement; vfdb74 =v61750.Tables[v01034.tblName]; } else  { v0a216 =v0f181; vfdb74 =v66c2; } if (wgIsFilterRow(v0a216.parentElement)) return vf0d37; var v9b843 =vfdb74.GetColumn(wgGetColNameByCell(v0a216)); if (!v9b843)return; var v86421 =v9b843.DataType; if (!v86421)return vf0d37; var v26272 =v9b843.DataFormatString; var vd5b75 =new ISClientData(null,v86421,v26272); v61750.ValEngine.CheckType(vd5b75);  var va4e71 =vd5b75.Type; if ((va4e71 =="number" ||va4e71 =="datetime")&&typeof(vf0d37)!="undefined") { vd5b75.NewValue =vf0d37;  if (va4e71 =="datetime" &&v26272 =="") vd5b75.Format ="G";  v61750.ValEngine.Validate(vd5b75,v61750.CultureInfo);  if (vd5b75.IsValid) return vd5b75.FormattedValue; else  { if (typeof(v0a216.oldCellValue)!="undefined") { vd5b75.NewValue =v0a216.oldCellValue; if (vd5b75.NewValue ==" ")vd5b75.NewValue ="";  return v61750.ValEngine.Mask(vd5b75,v61750.CultureInfo); } else return ""; } } else  { return vf0d37; }}function wgEditObj(vf9275,va5168,va4327,v30a37,ve0796){ this.element =va4327; this.type =v30a37; this.gridId =vf9275; this.tblName =va5168; this.cellElement =ve0796; return this;}function wgDispObjGeneric(v04375,v13968,v8cc27,v03b37,v2a896,v52f57,v3de39,vbb443){ wg9c911.m2a565(v04375,v13968,v8cc27,v03b37,v2a896,v52f57,v3de39,vbb443);}function _FixAmpChar(v4f675){ v4f675 =v4f675.replace(/&/g,"&amp;"); return v4f675; }function wgIsRowMarkedEdit(v56897){ var vb2575 =wgGetRootRow(v56897); return vb2575.markedEdit;}function wgIsRowDirty(v45e42){ var v5bb97 =new Array(); if (wgIsColumnSetRow(v45e42)) { v5bb97 =wgGetColumnSetRows(v45e42); } else  { v5bb97[0] =v45e42; } for (var vdeb62=0; vdeb62<v5bb97.length; vdeb62++) { var v86126 =v5bb97[vdeb62]; for (var v4b450=0; v4b450<v86126.cells.length; v4b450++) { if (v86126.cells[v4b450].cellModified) return true; } } return false;}function wgAddNewRow(v7fe42){ wg38213.mc2b9(v7fe42.Grid.Id,"AddRow",v7fe42);}function wgUpdateRow(v55c64){ wg38213.mc2b9(v55c64.Grid.Id,"UpdateRow",v55c64);}function wgDeleteRow(vcac77){ wg38213.mc2b9(vcac77.Grid.Id,"DeleteRow",vcac77);}function wgHighlightEditCell(v54211,v77a70,vd3d12){ wg9c911.m96a77(v54211,v77a70,vd3d12);}function wgActivateEditMode(v0c311){ v0c311.ActivateEditMode();}var wg9c911 ={ m15b94:function(v4a756) { if (wgIsColumnSetRow(v4a756)) { wg11388.m8b36(v4a756); return; }  var v4fc34 =wgGetFirstEditableCell(v4a756); if (v4fc34 !=-1) wg9c911.m96a77(v4a756.cells[v4fc34]); },  m8c187:function(vd6a56) { var v27d56 =vd6a56.parentElement; if (!v27d56)return; var v62684 =wg38213.m88693(v27d56); var v9e116 =ISGetObject(v62684.gridId); if (!v9e116.ActiveEditCell)return; wg9c911.m96a77(v9e116.ActiveEditCell.element,"Clear",vd6a56); v9e116.ExitEdit(); v9e116.ActiveEditCell =null; }, m96a77:function(vc5965,v1cb67,vfd179) { var v6d956 =vc5965.parentElement; if (!v6d956)return; var v54484 =wg38213.m88693(v6d956); var vc9716 =ISGetObject(v54484.gridId); var vbfe45 =vc9716.Tables[v54484.tblName]; if (vc9716.ActiveEditCell &&vc9716.ActiveEditCell.element ==vc5965 &&v1cb67 !="Clear" &&v1cb67 !="Redraw" )return; if (!vbfe45.IsUseColumnSet &&((vc5965.type !="Cell" &&vc5965.type !="FilterColumn")||(vc9716.Tables[v54484.tblName].IsRootTable &&vc5965.cellIndex ==v6d956.cells.length-1)))return; if (v1cb67 !="Clear") { vc5965.selStyle =vc5965.runtimeStyle.cssText; if (v1cb67 !="Nodraw") { with (vc5965.runtimeStyle) { var vd7c94 =borderLeft; var vacb81 =borderTop; var vc6c93 =borderRight; var va5437 =borderBottom; cssText =vc9716.GetEditFocusStyle(); if (IS.moz) vc6c93 =vc5965.style.borderRight; if (IS.moz &&vc6c93 =="")vc6c93 ="0px"; borderLeft =vd7c94; borderTop =vacb81; borderRight =vc6c93; borderBottom =va5437; } }  if (v1cb67 !="Redraw") { if (vc9716.ActiveEditCell &&vc9716.ActiveEditCell.element !=vc5965) wg9c911.m96a77(vc9716.ActiveEditCell.element,"Clear",vc5965);  vc9716.ActiveEditCell =new wgActiveCell(v54484.gridId,v54484.tblName,vc5965); vc9716.ActiveEditCell.rowElement =v6d956; vc9716.Tables[v54484.tblName].LastAECIndex =vc5965.cellIndex; } wg60540.m7794(vc9716,vc5965); } else  { if (vc5965 &&wgIsSameRow(v6d956,vfd179.parentElement))vc5965.runtimeStyle.cssText =vc5965.selStyle; } },  mf1882:function(va0367,v86a8) { if (wgIsColumnSetRow(v86a8)) { wg11388.mdeb7(va0367,v86a8); return; }  if (v86a8.type =="NewRow") { var v18e32 =v86a8.cells; var vf5348 =va0367.Tables[ wg38213.m92e89(v86a8)]; var v18376 =null;  if (!vf5348.IsRootTable) { var v0251 =vf5348.GetSubTableById(wg38213.m88693(v86a8).subId); v18376 =ISXml.CreateXmlDocument(); ISXml.LoadXml(v18376,v0251.RelNames); } if (v86a8.rowValidated)v86a8.rowValidated =false;   for (var v1d554=0; v1d554<v18e32.length; v1d554++) { if (v18e32[v1d554].type =="Cell") { var va187 =wgGetColNameByCell(v18e32[v1d554]); if (va187) wg9c911.m7ec13(va0367,vf5348,va187,v18e32[v1d554],v18376); } }  v18376 =null;  } }, m41d61:function(v03589) { var vf8167; if (v03589 &&v03589.type !="NewRow")return; var v96c8 =v03589.cells; for (var v9be69=0; v9be69<v96c8.length; v9be69++) { if (v96c8[v9be69].type =="NewRowInfoCell") { vf8167 =v96c8[v9be69]; break; } } if (v03589.type =="NewRow" &&vf8167)vf8167.innerText =v03589.infoText; },  m7ec13:function(vd1d3,vd939,v62a54,vfcf83,v51035) { if (vd939) { var v82f12 =vd939.Columns.GetNamedItem(v62a54); var vfea95 =v82f12.DefaultValue; var v14467 =v82f12.EditType; var vefb8 =v82f12.DefaultText; var v63b66 =false;  if (vefb8 ==null)vefb8 =""; if (vfea95 =="")vfea95 =" ";  if (vefb8 !="" ||vfea95 !=" ") v63b66 =true; if (v51035) { var vf4a98 =v51035.selectSingleNode("//DataColumn[@name='" +v62a54 +"']"); if (vf4a98) vfea95 =ISXml.DecodeString(vf4a98.text ); } if (v14467 =="Checkbox") { vfcf83.innerHTML ="<input type=checkbox class='DefChkBox' " +(vfea95.toLowerCase()=="true" ? "checked" : "")+">"; if (vfea95.toLowerCase()=="true")vfcf83.cellValue =true; else vfcf83.cellValue =false; } else if (v14467 =="DropdownList" ||v14467 =="WebComboNET") { if (vfea95 !=" ") { if (vefb8 =="")vefb8 =vfea95; vfcf83.cellValue =vfea95; vfcf83.innerText =vefb8; } else { vfcf83.innerText =vfea95; vfcf83.cellValue =vfea95; } } else  { vfcf83.innerText =vfea95; if (IS.moz &&vfea95 ==" ")vfcf83.innerHTML ="&nbsp;"; vfcf83.cellValue =vfea95; }  vfcf83.cellModified =false;  if (v63b66) { var v5593 =vfcf83.parentElement; if (!wgIsRowMarkedEdit(v5593)) { v5593.markedEdit =true; setTimeout(function(){wg9c911.m55a32(vd1d3);},50); } vfcf83.cellModified =true; } } else vfcf83.innerText =" "; },  mde08:function(v7a115,v5de76) { if (v7a115.tagName =="INPUT" &&v7a115.type =="checkbox" &&!v7a115.editHandler) { if (!v5de76)return; var v70193 =v5de76.parentElement; if (!v70193 ||v70193.tagName !="TR")return; var v8b483 =wg38213.m88693(v70193); if (!v8b483 ||(v8b483 &&!v8b483.gridId))return;  var v3a450 =ISGetObject(v8b483.gridId); var v62e37 =v3a450.Tables[v8b483.tblName];  if ((v70193.type =="NewRow" &&v62e37.Get("AllowAddNew")=="Yes")||(wgIsRecordRow(v70193)&&v62e37.Get("AllowEdit")=="Yes")) { if (v70193.noEdit)return; if (!v5de76.oldCellValue)v5de76.oldCellValue =v7a115.checked; wg9c911.m1b976(v3a450,v7a115); } } },  m27a2:function(vaf519,ve2758) { var v2af60 =vaf519.ActiveEditCell; var vafe63 =false; var table,vd2047,editType; if (vaf519.IsPreviewMode) { alert("Not supported in Preview mode!"); return; }  if (v2af60 &&v2af60.element) { var vd2047 =v2af60.element; table =vaf519.Tables[v2af60.tblName]; var ve9f77 =table.Columns.GetNamedItem(wgGetColNameByCell(vd2047)); if (!ve9f77)return; if (vd2047.noEdit =="True" ||!wgIsRowEditable(v2af60.rowElement))return false;  editType =ve9f77.EditType; if (v2af60.rowElement.type =="FilterRow") { var vdc096 =ve9f77.FilterEditType; if (vdc096 !="SameAsEditType") editType =vdc096; } if (vaf519.LastEditObj) { var vafe63 =vaf519.ExitEditMode(); if (!vafe63)return false; }  var vdea64 =false; var v29f51 =false; switch (editType) { case "CalendarDropdown": vdea64 =true; v29f51 =true; case "CalendarCombo": vdea64 =true; case "TextBox": vafe63 =wg9c911.mf378(v2af60,ve9f77,"",ve2758,vdea64,v29f51); break; case "WebComboNET": vafe63 =wg9c911.md3583(v2af60,ve9f77,"",ve2758); break; case "Checkbox": vafe63 =wg9c911.m29837(v2af60,ve9f77,"",ve2758); break; case "DropdownList": vafe63 =wg9c911.m6e140(v2af60,ve9f77,"",ve2758); break; case "MultilineTextbox": vafe63 =wg9c911.m6b463(v2af60,ve9f77,"",ve2758); break; case "Custom": var v33b49 =vaf519.CustomEditors[ve9f77.CustomEditorName]; vafe63 =v33b49.EnterEditMode(v2af60,ve9f77,"",ve2758); break; } } if (vafe63) { vaf519.IsInEditMode =true; if (vd2047.parentElement.type =="NewRow" ||wgIsFilterRow(vd2047.parentElement)) { table.IsAdding =true; vd2047.oldText =vd2047.innerText; if (vd2047.cellValue)vd2047.oldCellValue =vd2047.cellValue; } else  { table.IsEditing =true; if (!vd2047.oldText) { if (editType =="MultilineTextbox") vd2047.oldText =vd2047.innerHTML; else { vd2047.oldText =vd2047.innerText; if (ve9f77.ColumnType =="ImageAndText" &&vd2047.oldText &&vd2047.oldText.substring(0,1)==" ") vd2047.oldText =vd2047.oldText.substring(1); } }  if (!vd2047.oldCellValue) { var vddc15 =wgGetUnMask(vaf519,ve9f77,vd2047); if (typeof(vddc15)!="undefined") { vd2047.oldCellValue =vddc15; } } }  vaf519.LastEditObj =new wgEditObj(vaf519.Name,table.Id,vafe63,editType,vd2047);  if (!ISEvent.Raise(vaf519.LayoutSettings.ClientSideEvents.OnEnterEditMode,vaf519.Name,table.Id,vaf519.LastEditObj)) return; setTimeout(function(){wg9c911.m38516(vaf519);},100); }  return vafe63; },  m5a567:function(vd3b77,v78c10,v68a74,v68077) { var v31f64 =vd3b77.ActiveEditCell; var vbca45 =vd3b77.LastEditObj; var v61329 =false; var v2e419 =true; var v29b23; var vab26 =true; if (!v31f64)return true; if (v78c10 ==-1) { if (vbca45 &&vbca45.cellElement) v29b23 =vbca45.cellElement.parentElement;  if (!v29b23)v29b23 =v31f64.rowElement;  if (v29b23) { var v8c829 =v29b23.type; if (v8c829 =="NewRow") wg9c911.mf1882(vd3b77,v29b23); else wg9c911.ma1d95(v29b23);  wg60540.me2c56(v29b23,vd3b77.GetCurSelImage()); } } else  { if (vbca45 &&vbca45.cellElement) { v29b23 =vbca45.cellElement.parentElement; v2e419 =wg9c911.m24018(vbca45); }  if (v2e419) { if (!v29b23)v29b23 =v31f64.rowElement; v2e419 =(wgIsRowMarkedEdit(v29b23)&&wgIsRowDirty(v29b23)); if (!v2e419)v61329 =true; }  if (v2e419) { var vd0482 =vd3b77.LayoutSettings.NewRowLostFocusAction; var ve1f76 =vd3b77.LayoutSettings.RowLostFocusAction; var v8c829 =v29b23.type; var v2816 =false;  vd3b77.IsExitingEdit =true;  if (v8c829 =="NewRow") { if (v78c10 !=0) { if (vd0482 =="AlwaysPrompt") vab26 =v2816 =confirm(vd3b77.GetString("MessageBoxText/AddNewRow")); else if (vd0482 =="AlwaysUpdate") v2816 =true; } else v2816 =true;  if (v2816) { v61329 =wg9c911.m73a90(vd3b77,v29b23); if (v61329) wg9c911.m20470(vd3b77,v68a74,v78c10 =="0"); }else v61329 =true; } else if (wgIsRecordRow(v29b23)) { if (v78c10 !=0) { if (ve1f76 =="AlwaysPrompt") vab26 =v2816 =confirm(vd3b77.GetString("MessageBoxText/UpdateRow")); else if (ve1f76 =="AlwaysUpdate") v2816 =true; } else  v2816 =true;  if (v2816) { v61329 =wg9c911.m73a90(vd3b77,v29b23); if (v61329) wg9c911.m42464(vd3b77);  } else  { wg9c911.ma1d95(v29b23); v61329 =true; } } else if (wgIsFilterRow(v29b23)) { if (v78c10 ==0) { var vc7d4 =v31f64.element; var v8e272 =vd3b77.Tables[v31f64.tblName]; if (ISEvent.Raise(vd3b77.LayoutSettings.ClientSideEvents.OnColumnFilter,vd3b77.Id,v8e272)) { wg85027.mf6c40(v8e272); wg60540.me2c56(vc7d4.parentElement,vd3b77.GetCurSelImage()); wg38213.mc2b9(vd3b77.Name,"ColumnFilter",v8e272.Id); } } else  { if (vbca45) wg9c911.m24018(vbca45,true); wg9c911.ma1d95(v29b23); v61329 =true; } } vd3b77.IsExitingEdit =false; } } return [v61329,vab26,v2816]; },  m38516:function(v97956) { var v01a89 =v97956.LastEditObj; if (v01a89) { if (v01a89.type =="TextBox") v01a89.element.focus(); else if (v01a89.type =="WebComboNET") v01a89.element.TextObj.focus(); } },  EnsureWebComboElementExist: function(vbd056,va6457) { var vf7956 =va6457.FrameObj; if (!vf7956.parentElement) { vbd056.FrameObj.insertAdjacentElement("beforeEnd",va6457.FrameObj); } }, m2a565:function(v34f48,va6571,v85952,vac659,v54836,v4ce93,v1db85,v0109) { var v4301 =posLib2.getLeftAbs(v34f48.FrameObj);  var v26644 =posLib2.getTopAbs(v34f48.FrameObj);  with (va6571.style) { if (v4ce93) { if (wgIsFilterRow(v85952.parentElement)) vac659 -=20; }  var v5de63 =parseInt(v34f48.FrameObj.currentStyle.borderWidth); if (v34f48.FrameObj.style.position =="absolute")v5de63 =0; if (isNaN(v5de63))v5de63 =0; left =ISPosLib.getLeft(v85952)+(vac659 ? vac659 : 0)-v4301 +v34f48.EditCtlLeftAdj +v5de63; top =ISPosLib.getTop(v85952)+(v54836 ? v54836 : 0)-v26644 +v34f48.EditCtlTopAdj +v5de63;  var vcf611 =v34f48.FrameObj.parentElement;  if (v34f48.PosRelativeTo !=null) vcf611 =v34f48.PosRelativeTo; if (!v34f48.LayoutSettings.UseRelativePositioning) { if (vcf611 &&(vcf611.tagName =="DIV" &&vcf611.currentStyle.hasLayout &&vcf611.currentStyle.position !="absolute")||(v34f48.PosRelativeTo)) { var ve4e70 =ISPosLib.getLeft(vcf611); var vc0780 =ISPosLib.getTop(vcf611); left =posLeft -ve4e70; top =posTop -vc0780; } } else { if (IS.ie) { left =posLeft -posLib2.getLeftAbs(v34f48.FrameObj,v34f48); top =posTop -posLib2.getTopAbs(v34f48.FrameObj,v34f48); } }  if (v1db85 =="DropdownList") { var v36756 =top; top ="0px"; visibility ="hidden"; setTimeout(function(){va6571.style.top =v36756; va6571.style.visibility ="visible"; va6571.focus();},1); }  position ="absolute"; if (va6571.tagName !="TEXTAREA")overflow ="hidden"; if (!v4ce93) { width =v85952.offsetWidth -(vac659 ? (vac659*2): 0)-(v0109 ? 16 : 0); height =v85952.offsetHeight-2; if (wgIsFilterRow(v85952.parentElement)&&parseInt(width)>36) width =parseInt(width)-20; }  display ="";  va6571.origLeft =posLeft; va6571.origTop =posTop; if (zIndex ==0)zIndex =199; } }, m6e140:function(vf9696,v33440,v2ad32,v0fa28) { var v85384 =v33440.Name; var vba173 =document.getElementById(vf9696.gridId +"_" +vf9696.tblName +"_" +v85384); var ve7e37 =ISGetObject(vf9696.gridId); var v85661 =vf9696.element;  if (vba173) { wgDispObjGeneric(ve7e37,vba173,v85661,0,0,null,"DropdownList"); if (!vba173.KBHandlerInit) { vba173.attachEvent("onkeydown",function(){wg9c911.m4a347(ve7e37);}); vba173.attachEvent("onchange",function(){wg9c911.m9c487(ve7e37,vba173);}); vba173.KBHandlerInit =true; } vba173.value =v85661.cellValue; if (v0fa28)vba173.isDirty =true; else vba173.isDirty =false;  if (vba173.style.visibility =="visible") vba173.focus(); } return vba173; }, m9c487:function(vaec64,v4c520) { wg9c911.m55a32(vaec64); v4c520.isDirty =true; var v48e64 =v4c520.parentElement; v48e64.cellModified =true; v48e64.cellValue =v4c520.value; },  mf7d34:function(v54e56,v5e032,vd7966,vaa633) { var v9ea64 =v5e032.WebComboID; var vce320 =ISGetObject(v9ea64); if (vce320) { var v79c29 =vce320.FrameObj; var vd8768 =v54e56.element; var v8d420 =vd8768.parentElement.type =="NewRow"; var v11193 =ISGetObject(v54e56.gridId); var vf7c90 =v11193.Tables[v54e56.tblName]; wg38213.m79d94(vd8768); wgDispObjGeneric(v11193,v79c29,vd8768,0,1,null,"WebComboNET"); vce320.DoResize();  with (vce320.TextObj) { style.paddingLeft ="1px"; style.paddingTop ="1px"; value =(vd8768.innerText ==" " ? "" : vd8768.innerText); if (vaa633)vaa633 =true; else vaa633 =false; if (!vce320.KBHandlerInit) { attachEvent("onkeydown",function(){wg9c911.m4a347(v11193);}); attachEvent("onselectstart",function(){event.cancelBubble=true;}); attachEvent("onpaste",function(){wg9c911.madb13(v11193);});  if (vce320.LayoutSettings.ClientSideEvents.OnAfterItemSelected =="") vce320.LayoutSettings.ClientSideEvents.OnAfterItemSelected ="WGUI.WCIS('" +v11193.Name +"', '" +vce320.Name +"')"; else vce320.LayoutSettings.ClientSideEvents.OnAfterItemSelected +=";" +"WGUI.WCIS('" +v11193.Name +"', '" +vce320.Name +"')";  vce320.KBHandlerInit =true; } } vce320.LastSelectedIndex =vce320.SelectedIndex =-1; vce320.IsDirty =true; vce320.NeedClearList =true;  if (vce320.LinkSettings.Enabled) { if (vce320.LinkSettings.ParentWebCombo ==null) vce320.LinkSettings.ResolveParentWebCombo();  var v2ef48 =null; if (vce320.LinkSettings.ParentWebCombo !=null) { for(var vd7125=0; vd7125<vce320.LinkSettings.ParentWebCombo.length; vd7125++) { if (vce320.LinkSettings.ParentWebCombo[vd7125].Id ==vce320.LinkSettings.ParentWebComboID) { v2ef48 =vce320.LinkSettings.ParentWebCombo[vd7125]; break; } } }  if (v2ef48 !=null) { var vd8034 =null; for (var vd7125=0; vd7125<vf7c90.Columns.length; vd7125++) { var v70451 =vf7c90.Columns[vd7125]; if (v70451.Visible &&v70451.EditType =="WebComboNET" &&v70451.WebComboID ==vce320.LinkSettings.ResolvedParentWebComboID) { vd8034 =v70451; break; } }  if (vd8034 ==null) { alert("The ParentWebCombo '" +vce320.LinkSettings.ParentWebComboID +"' which this WebCombo is linked to does not bound to any Column in this Grid."); } else { var vf4c75 =v54e56.rowElement; v2ef48.Text =wgGetCellByName(vf4c75,v70451.Name).innerText; v2ef48.Value =wgGetCellByName(vf4c75,v70451.Name).cellValue; v2ef48.UpdateState(); } } }  if (!vce320.IsDataBound &&vce320.UnboundDataInitialized) { try  { var ve9d68 =vce320.GetTData(); if (ve9d68) { for (var vd7125=0; vd7125<ve9d68.rows.length; vd7125++) { vce320.UnhighlightRow(ve9d68.rows[vd7125]); } } }catch(e){} } if (vd8768.cellValue) { vce320.Value =vd8768.cellValue; var v0fa79 =vd8768.innerText; if (v5e032.ColumnType =="ImageAndText" &&v0fa79.substring(0,1)==" ")v0fa79 =v0fa79.substring(1); vce320.Text =v0fa79; if (!vce320.IsDataBound &&vce320.AllowAdd) { if (!vce320.UnboundDataInitialized) vce320.InitializeUnboundMode(); vce320.SearchUnbound(); } } else  { if (vd8768.innerText !="" &&vd8768.innerText !=" ") { vce320.Value =vd8768.innerText; var v0fa79 =vd8768.innerText; if (v5e032.ColumnType =="ImageAndText" &&v0fa79.substring(0,1)==" ")v0fa79 =v0fa79.substring(1); vce320.Text =v0fa79;  if (!vce320.IsDataBound &&vce320.AllowAdd) { if (!vce320.UnboundDataInitialized) vce320.InitializeUnboundMode(); vce320.SearchUnbound(); } } else  { vce320.Value =null; vce320.Text =""; } } v5e032.GetGrid().PreparePostBackData(); return vce320;  } else  { alert("Can't find WebCombo.NET instance with ID '" +v9ea64 +"'"); return false; } }, md3583:function(ve2b13,v66986,v9bf58,vc1127) { var vc8a23 =v66986.WebComboID; var v7bd12 =wcGetComboById(vc8a23); if (v7bd12) { if (v7bd12.MajorVersion &&v7bd12.MajorVersion =="3.0") { return wg9c911.mf7d34(ve2b13,v66986,v9bf58,vc1127) }  wcFrame =v7bd12.FrameObj; var vd1763 =ve2b13.element; var vbd673 =vd1763.parentElement.type =="NewRow"; var v96419 =ISGetObject(ve2b13.gridId); wgDispObjGeneric(v96419,wcFrame,vd1763,0,1,null,"WebComboNET"); wcres(vc8a23); with (v7bd12.TextObj) { style.paddingLeft ="1px"; style.paddingTop ="1px"; value =(vd1763.innerText ==" " ? "" : vd1763.innerText); if (vc1127)vc1127 =true; else vc1127 =false; if (!v7bd12.KBHandlerInit) { attachEvent("onkeydown",function(){wg9c911.m4a347(v96419);}); attachEvent("onselectstart",function(){event.cancelBubble=true;}); attachEvent("onpaste",function(){wg9c911.madb13(v96419);}); if (ISXml.GetNodeText(v7bd12.XmlObj,"//events/onafteritemselected")=="") sxt(v7bd12,"//events/onafteritemselected","WGUI.WCIS('" +v96419.Name +"', '" +v7bd12.Name +"')"); else sxt(v7bd12,"//events/onafteritemselected",ISXml.GetNodeText(v7bd12.XmlObj,"//events/onafteritemselected")+";" +"WGUI.WCIS('" +v96419.Name +"', '" +v7bd12.Name +"')");  v7bd12.KBHandlerInit =true; } } v7bd12.LastSelectedIndex =v7bd12.SelectedIndex =-1; v7bd12.IsDirty =true; v7bd12.NeedClearList =true; if (!v7bd12.IsDataBound &&v7bd12.UnboundDataInitialized) { try  { var v54840 =v7bd12.GetTData(); if (v54840) { for (var v26f65=0; v26f65<v54840.rows.length; v26f65++) { wcrcsel(vc8a23,v54840.rows[v26f65]); } } }catch(e){} } if (vd1763.cellValue) { v7bd12.Value =vd1763.cellValue; var vc4159 =vd1763.innerText; if (v66986.ColumnType =="ImageAndText" &&vc4159.substring(0,1)==" ")vc4159 =vc4159.substring(1); v7bd12.Text =vc4159; if (!v7bd12.IsDataBound &&v7bd12.AllowAdd) { if (!v7bd12.UnboundDataInitialized) { if (typeof(wcInitUnbound)=="function") wcInitUnbound(vc8a23);  } wcuseek(vc8a23); } } else  { if (vd1763.innerText !="" &&vd1763.innerText !=" ") { v7bd12.Value =vd1763.innerText; var vc4159 =vd1763.innerText; if (v66986.ColumnType =="ImageAndText" &&vc4159.substring(0,1)==" ")vc4159 =vc4159.substring(1); v7bd12.Text =vc4159;  if (!v7bd12.IsDataBound &&v7bd12.AllowAdd) { if (!v7bd12.UnboundDataInitialized) { if (typeof(wcInitUnbound)=="function") wcInitUnbound(vc8a23);  } wcuseek(vc8a23); } } else  { v7bd12.Value =null; v7bd12.Text =""; } } v66986.GetGrid().PreparePostBackData(); return v7bd12; } else  { alert("Can't find WebCombo.NET instance with ID '" +vc8a23 +"'"); return false; } }, mca047:function(vb7b80,vd1a66) { var vf4235 =ISGetObject(vb7b80); var vfc180 =wcGetComboById(vd1a66); wg9c911.m55a32(vf4235); vfc180.TextObj.isDirty =true; }, mf378:function(v89594,v28074,v91141,v60b56,v0590,v38a92) { var v1f047 =v89594.element; var va1947 =ISGetObject(v89594.gridId); if (!va1947.TBObj) { var v20b52 =document.getElementById(v89594.gridId +"_TB"); v20b52.name =v20b52.id; v20b52.attachEvent("onfocus",wg9c911.m92c10); v20b52.onselectstart =function(){event.cancelBubble =true; return true;}; v20b52.onkeydown =function(){wg9c911.m4a347(va1947);}; v20b52.attachEvent("onpaste",function(){wg9c911.madb13(va1947);}); va1947.TBObj =v20b52; } var ve358 =va1947.TBObj; var vb8b34 =null; ve358.readOnly =(v38a92); ve358.className =va1947.LayoutSettings.TextBoxClass; if (v0590) { if (!va1947.CalDDObj) { var v9c779 =document.getElementById(va1947.Name +"_CalDD"); if (wg_Global.CalDDImg !="CalendarDD.gif")v9c779.src =va1947.LayoutSettings.ImageSettings.Folder +wg_Global.CalDDImg; va1947.CalDDObj =v9c779; } va1947.CalDDObj.DtObj =ve358; va1947.CalDDObj.DtFormat =v28074.DataFormatString; vb8b34 =va1947.CalDDObj; }  wgDispObjGeneric(va1947,ve358,v1f047,1,1,null,null,vb8b34); if (v0590) { wgDispObjGeneric(va1947,vb8b34,v1f047,v1f047.offsetWidth-15-1,2,true); vb8b34.style.cursor ="hand"; } if (v28074.TextboxMaxlength) ve358.maxLength =v28074.TextboxMaxlength; else ve358.maxLength =2147483647;  var v6ea46 =(v1f047.innerText ==" " ? "" : wgGetUnMask(va1947,v28074,v1f047,true)); if (v28074.ColumnType =="ImageAndText" &&v6ea46.substring(0,1)==" ")v6ea46 =v6ea46.substring(1); ve358.value =v6ea46;  if (v60b56) ve358.isDirty =true; else ve358.isDirty =false;  if (IS.ie) ve358.focus(); return ve358; }, me6434:function(v8130,v08c97) { var vb1639 =wg_Global.CalFrObj; var vb5f61 =wg_Global.CalPopObj; if (!vb1639 &&!vb5f61) { var v34b39 =ISGetObject(v08c97); if (IS.ie) vb1639 =document.createElement("<IFRAME id='ISDefCal' src='" +v34b39.LayoutSettings.ScriptDirectory +wg_Global.CalFile +"'></IFRAME>"); else { vb1639 =document.createElement("IFRAME"); vb1639.src =v34b39.LayoutSettings.ScriptDirectory +wg_Global.CalFile; vb1639.id ="ISDefCal"; } vb1639.style.cssText ="position:absolute;top:-100px;left:-100px;height:10px;width:10px"; document.body.appendChild(vb1639); vb1639 =document.getElementById("ISDefCal"); wg_Global.CalFrObj =vb1639; setTimeout("WGUI.TGCALDD(null, '" +v08c97 +"')",100); return; } if (!vb5f61) { var vbf983 =""; if (IS.ie) { try {vbf983 =vb1639.contentWindow.document.body.parentElement.outerHTML; }catch(e){setTimeout("wg9c911.me6434(null, '" +v08c97 +"')",100); return;} } else { try  { vbf983 =vb1639.contentWindow.document.firstChild.innerHTML;  vbf983 ="<html>" +vbf983 +"</html>"; vbf983 =vbf983.replace(new RegExp("parent.","g"),""); }catch(e){setTimeout("wg9c911.me6434(null, '" +v08c97 +"')",100); return;} }  vb5f61 =window.createPopup(); var v3593 =vb5f61.document; v3593.estWidth =vb1639.document.body.scrollWidth; v3593.estHeight =vb1639.document.body.scrollHeight +vb1639.document.body.offsetHeight; v3593.open("text/html","replace"); v3593.write(vbf983 ); v3593.close(); document.getElementById("ISDefCal").removeNode(true); vb1639 =wg_Global.CalFrObj =null; wg_Global.CalPopObj =vb5f61; setTimeout("WGUI.TGCALDD(null, '" +v08c97 +"')",100); return; }  var v3593 =vb5f61.document; var v34b39 =ISGetObject(v08c97); var v2ce98 =v34b39.CalDDObj.DtObj;  if (!isCAL.isCalLoaded)loadDatePicker(v3593,v34b39); setObject(v2ce98); isCAL.curFormat =v34b39.CalDDObj.DtFormat; var vb1237 =new Date();  if (v2ce98.value !="") { var v65427 =new ISClientData(null,"datetime",""); v65427.NewValue =v2ce98.value; v34b39.ValEngine.Validate(v65427,v34b39.CultureInfo); if (v65427.IsValid) { vb1237 =new Date(v65427.DateData.Year,v65427.DateData.Month,v65427.DateData.Day); } } setDate(vb1237); vb5f61.show(ISPosLib.getScreenLeft(v2ce98),ISPosLib.getScreenTop(v2ce98)+v2ce98.offsetHeight,170,147+isCAL.adjHeight,null,true); }, m6b463:function(v07864,v6c793,v0d179,v7957) { var vb2e19 =v07864.element; var ve5d6 =ISGetObject(v07864.gridId); if (!ve5d6.TBMLObj) { var v0d981 =document.getElementById(v07864.gridId +"_TBML"); v0d981.name =v0d981.id; v0d981.attachEvent("onfocus",wg9c911.m92c10); v0d981.onselectstart =function(){event.cancelBubble =true; return true;}; v0d981.onkeydown =function(){wg9c911.m4a347(ve5d6);}; v0d981.attachEvent("onpaste",function(){wg9c911.madb13(ve5d6);}); ve5d6.TBMLObj =v0d981; } var v9fe80 =ve5d6.TBMLObj; v9fe80.className =ve5d6.LayoutSettings.TextBoxClass; wgDispObjGeneric(ve5d6,v9fe80,vb2e19,1,1); if (v6c793.TextboxMaxlength) v9fe80.maxLength =v6c793.TextboxMaxlength;  v9fe80.value =(vb2e19.innerText ==" " ? "" : vb2e19.innerText);  if (v7957)v9fe80.isDirty =true; else v9fe80.isDirty =false; v9fe80.focus(); return v9fe80; }, m29837:function(vb4f86,v2cc86,vb6778,vf8621) { var v40964 =vb4f86.element; var vb3893 =wg9c911.mcf282(v40964); var v07f79 =ISGetObject(vb4f86.gridId); wg9c911.m1b976(v07f79,vb3893); if (vf8621)vb3893.isDirty =true; else vb3893.isDirty =false; vb3893.focus(); return vb3893; }, mcf282:function(vd2786) { var v14386 =vd2786.parentElement; if (wgIsFilterRow(v14386)) return vd2786.childNodes[0].childNodes[0]; else return vd2786.childNodes[0]; }, m1b976:function(va6786,v65486) { if (!v65486.editHandler) { v65486.editHandler =true; v65486.onkeydown =function(){wg9c911.m4a347(va6786);}; v65486.onclick =function(){wg9c911.m21e5(va6786,v65486);}; } }, m21e5:function(vea386,v09886) { wg9c911.m55a32(vea386); v09886.isDirty =true; var v4f986 =wg38213.mb6c95(v09886); var v39386 =wg38213.m88693(v4f986.parentElement); v4f986.cellModified =true; v4f986.cellValue =v09886.checked; if (!ISEvent.Raise(vea386.LayoutSettings.ClientSideEvents.OnCheckBoxClick,vea386.Name,v39386.tblName,wgGetColNameByCell(v4f986),v09886.checked)) return; }, m92c10:function() { var va3686 =event.srcElement; try  { va3686.select(); } catch(e){} }, m24018:function(v6e737,vb1096) { if (!v6e737)return; var v81686 =v6e737.element; var vb7286 =v6e737.cellElement; var v88f78 =v6e737.type; var v2ee21 =ISGetObject(v6e737.gridId); var v65144 =""; var v0f318 =""; var ve105 =true; var v5890 =true; var v9f784 =null; if (!ISEvent.Raise(v2ee21.LayoutSettings.ClientSideEvents.OnExitEditMode,v2ee21.Name,v6e737.tblName,v2ee21.LastEditObj)) return; var vea395 =vb7286.parentElement; if (v88f78 =="WebComboNET") { v81686.FrameObj.style.display ="none"; if (v81686.AllowAdd) { if (v81686.Text =="" ||v81686.Text ==null) v81686.Text =v81686.TextObj.value; if (v81686.Value =="" ||v81686.Value ==null) v81686.Value =v81686.Text; } v65144 =(v81686.Text ==null ? "" : v81686.Text); v0f318 =(v81686.Value ==null ? "" : v81686.Value); if (v81686.TextObj.isDirty ||(vb7286.innerText !=v81686.Text)) vb7286.cellModified =true; } else if (v88f78 =="Checkbox") { v5890 =false; if (!vb1096) { vb7286.cellValue =wg9c911.mcf282(vb7286).checked; if (wgIsFilterRow(vea395)) wg85027.m0b724(vb7286.childNodes[0]); } else  { vb7286.cellValue =vb7286.oldCellValue; wg9c911.mcf282(vb7286).checked =vb7286.cellValue; } } else if (v88f78 =="Custom") { var vdb967 =v2ee21.Tables[v6e737.tblName]; var v9f784 =vdb967.GetColumn(wgGetColNameByCell(vb7286)); var vfb383 =v2ee21.CustomEditors[v9f784.CustomEditorName]; ve105 =vfb383.ImplementationObject.OnExitEditMode(vb1096); v65144 =vfb383.ImplementationObject.GetText(); v0f318 =vfb383.ImplementationObject.GetValue(); if (typeof(vfb383.ImplementationObject.ShouldProcessExitEditModeDefaultBehavior)=="function") v5890 =vfb383.ImplementationObject.ShouldProcessExitEditModeDefaultBehavior(); if (typeof(vfb383.ImplementationObject.GetContentMode)=="function") vb7286.contentMode =vfb383.ImplementationObject.GetContentMode(); } else  { if (v81686.style.display !="none") v81686.style.display ="none";  if (v88f78 =="CalendarDropdown" ||v88f78 =="CalendarCombo") { if (v2ee21.CalDDObj) v2ee21.CalDDObj.style.display ="none"; }  if (v88f78 =="TextBox" ||v88f78 =="MultilineTextbox" ||v88f78 =="CalendarCombo" ||v88f78 =="CalendarDropdown") { v65144 =v0f318 =(v81686.value ==null ? "" : v81686.value); if (v65144 !="") { if (v88f78 =="MultilineTextbox")v65144 =v65144.replace(/[\n]/g,"<BR>"); else v65144 =wgGetMask(v2ee21,v6e737,v65144); } } else  { v0f318 =v81686.value; try  { v65144 =v81686.options[v81686.selectedIndex].text; } catch(e) { v65144 =""; } } }  var va6495 =vb7286.innerHTML.toUpperCase().indexOf("NOBR")>0; var v73073 =wg60540.m31885(vb7286); if (v73073) va6495 =v73073.innerHTML.toUpperCase().indexOf("NOBR")>0; if (v5890) { var vf1510 =""; var vdb967 =v2ee21.Tables[v6e737.tblName]; var v9f784 =vdb967.GetColumn(wgGetColNameByCell(vb7286)); if (!vb1096) { if (v9f784.ColumnType =="ImageAndText" &&wgIsRecordRow(vea395)) { try { vf1510 =vb7286.childNodes[0].childNodes[0].outerHTML; }catch (e){} }  var vb8e64 =(va6495 ? "<NOBR>" : "")+vf1510 +(v65144 =="" ? "&nbsp;" : _FixAmpChar(v65144))+(va6495 ? "</NOBR>" : ""); if (v73073) v73073.innerHTML =vb8e64; else vb7286.innerHTML =vb8e64;  if (IS.moz &&wgIsFilterRow(vea395)) wg9d526.m73a36(vb7286,vb7286.offsetWidth);  vb7286.cellValue =v0f318; var vdb967 =v2ee21.Tables[v6e737.tblName]; v9f784 =vdb967.GetColumn(wgGetColNameByCell(vb7286));  if (v0f318 !="" &&v88f78 =="TextBox") { v0f318 =wgGetUnMask(v2ee21,v9f784,vb7286); vb7286.cellValue =v0f318; }  if (v81686.isDirty) vb7286.cellModified =true; if (wgIsFilterRow(vea395)) wg85027.m0b724(vb7286.childNodes[0]); else  { var v0a038 =vdb967.Formulas; for (var v31f47=0; v31f47<v0a038.length; v31f47++) { if (v0a038[v31f47].IsCellAccounted(vb7286)) { v0a038[v31f47].ProcessResult(vb7286.parentElement,vb7286); } } } } else  { if (v9f784.ColumnType =="ImageAndText" &&wgIsRecordRow(vea395)) { try { vf1510 =vb7286.childNodes[0].childNodes[0].outerHTML; }catch (e){} } if (vb7286.oldText) { var vb8e64 =(va6495 ? "<NOBR>" : "")+vf1510 +(vb7286.oldText =="" ||vb7286.oldText ==" " ? "&nbsp;" : vb7286.oldText)+(va6495 ? "</NOBR>" : ""); if (!v73073) vb7286.innerHTML =vb8e64; else v73073.innerHTML =vb8e64; } if (vb7286.cellValue)vb7286.cellValue =vb7286.oldCellValue; } }  if (IS.moz) wg9d526.m29151(v2ee21,vb7286); v2ee21.LastEditObj =null; v2ee21.IsInEditMode =false; return ve105; }, ma1d95:function(v8b495) { var v0b216 =wg38213.m88693(v8b495); var v31343 =ISGetObject(v0b216.gridId); var ve8d40 =v31343.Tables[v0b216.tblName]; var va5718 =new Array(); if (wgIsColumnSetRow(v8b495)) va5718 =wgGetColumnSetRows(v8b495); else va5718[0] =v8b495;  for (var v8f249=0; v8f249<va5718.length; v8f249++) { var v94852 =va5718[v8f249].cells; for (var v20683=0; v20683<v94852.length; v20683++) { var v03162 =v94852[v20683]; if (v03162.type =="Cell" ||v03162.type =="FilterColumn") { if (v03162.cellModified) { var v97962 =ve8d40.GetColumn(wgGetColNameByCell(v03162));  if (v97962.EditType =="Checkbox") { v03162.cellValue =v03162.oldCellValue; wg9c911.mcf282(v03162).checked =v03162.cellValue; } else  { var v9ed39 =v03162.innerHTML.toUpperCase().indexOf("NOBR")>0; var v12c26 =wg60540.m31885(v03162); var v5e758 =v03162.oldText; var v2e219 ="";  if (wgIsFilterRow(va5718[v8f249])) { v5e758 =v03162.childNodes[0].getAttribute("value"); if (v5e758 =="") { var vd4145 =ve8d40.FilteredColumns.GetNamedItem(v97962.Name); if (vd4145) ve8d40.FilteredColumns.Remove(vd4145); } }  if (v12c26) v9ed39 =v12c26.innerHTML.toUpperCase().indexOf("NOBR")>0; if (v97962.ColumnType =="ImageAndText" &&wgIsRecordRow(v8b495)) { try { v2e219 =v03162.childNodes[0].childNodes[0].outerHTML; }catch (e){} }  var vf7a72 =(v9ed39 ? "<NOBR>" : "")+v2e219 +((v5e758 =="" ||v5e758 ==" ")? "&nbsp;" : v5e758)+(v9ed39 ? "</NOBR>" : ""); if (v12c26) v12c26.innerHTML =vf7a72; else v03162.innerHTML =vf7a72;  if (v03162.cellValue)v03162.cellValue =v03162.oldCellValue; if (wgIsFilterRow(va5718[v8f249])&&IS.moz) wg9d526.m73a36(v03162,v03162.offsetWidth); } } } } } }, md3746:function(v47918,v6ae84) { var vd0c18 =v47918.cells; v47918.markedEdit =false; }, m20470:function(vedf85,vd2764,vc9b28) { var v53640 =vedf85.ActiveEditCell; if (wg9c911.m05179(vedf85)) { if (!vc9b28) { wg9c911.mf1882(vedf85,v53640.rowElement); wg60540.me2c56(v53640.rowElement,vedf85.GetCurSelImage()); } if (vd2764) wg9c911.m15b94(v53640.rowElement); wg9c911.m38065(vedf85); } }, m42464:function(v5b575) { var vca575 =v5b575.ActiveEditCell; if (wg9c911.m3b872(v5b575)) { } }, m38065:function(v9f965,v5cb11) { var v80c75 =v9f965.ActiveEditCell; if (v80c75) { if (v9f965.LastEditObj)return; if (document.activeElement ==v80c75.element ||!v9f965.HasFocus())return; v80c75.element.setActive(); if (!v5cb11) setTimeout(function(){wg9c911.m38065(v9f965,true);},200); } else  { var va4b38 =v9f965.LastSelObj; if (va4b38 &&va4b38.element) { var vf4c24 =wgGetCellByPosition(va4b38.element,0); if (vf4c24 &&v9f965.HasFocus()) vf4c24.setActive(); } } }, madb13:function(v6239) { wg9c911.m55a32(v6239); event.srcElement.isDirty =true; }, m4a347:function(vb4310,ve6196) { var vc909 =0; var vbaa98 =false; vc909 =event.keyCode; if (!ISEvent.Raise(vb4310.LayoutSettings.ClientSideEvents.OnEditKeyDown,vb4310.Name,vc909)) return;  vc909 =event.keyCode;  if (vc909 ==9 ) { var v19418 =vb4310.ActiveEditCell; var vd8914 =v19418.element; var v95a82 =true; if (!event.shiftKey &&vd8914 ==wgGetLastEditableCell(v19418.rowElement)) { v95a82 =wg9c911.m5a567(vb4310,0,true,vc909)[0]; if (v19418.rowElement.type =="NewRow" ||vb4310.IsInProgress) v95a82 =false; }  if (v95a82) { var va7f78 =null;  if (IS.ie) { va7f78 =document.createEventObject(); va7f78.keyCode =vc909; va7f78._srcElement =vd8914; va7f78.shiftKey =event.shiftKey; va7f78.ctrlKey =event.ctrlKey; vd8914.fireEvent("onkeydown",va7f78); } else { va7f78 =new Object(); va7f78.srcElement =vd8914; va7f78.shiftKey =event.shiftKey; va7f78.ctrlKey =event.ctrlKey; va7f78.keyCode =vc909; wg60540.m4145(va7f78); } if (!event.ctrlKey) vb4310.ActivateEditMode();  } vbaa98 =true; } else if (vc909 ==27) { var vd8914 =vb4310.ActiveEditCell.element; wg9c911.m24018(vb4310.LastEditObj,true); vd8914.setActive(); vbaa98 =true; } else if (vc909 ==13) { var v19418 =vb4310.ActiveEditCell; var vd8914 =v19418.element; var v28151 =vb4310.LastEditObj; if (!event.shiftKey) { if (v28151.type !="MultilineTextbox") { var v53e35 =true; if (v28151.type =="WebComboNET") { var v56834 =vb4310.Tables[v19418.tblName].GetColumn(wgGetColNameByCell(vd8914)); var v3b143 =wcGetComboById(v56834.WebComboID); if (v3b143.EntryMode =="InstantLookup") v53e35 =false; }  if (v53e35) { if (v19418.rowElement.type =="FilterRow" &&vb4310.LayoutSettings.ApplyFiltersKey =="Enter") wg9c911.m5a567(vb4310,0,false); else wg9c911.m24018(v28151); vd8914.setActive(); vbaa98 =true; } } else vbaa98 =false; } else  { if (!v28151 ||v28151.type !="MultilineTextbox") wg9c911.m5a567(vb4310,0,false); else  { wg9c911.m24018(v28151); vd8914.setActive(); } vbaa98 =true; } } else if(vc909 ==115) { var v19418 =vb4310.ActiveEditCell; var vd8914 =v19418.element; var v3ae57 =vd8914.parentElement;  if (wgIsFilterRow(v3ae57)) { wg85027.mb3066(vd8914.childNodes[0]); event.keyCode =0; vbaa98 =true; } } else if(vc909>=46 &&vc909<=57 ||vc909>=54 &&vc909<=90 ||vc909>=96 &&vc909<=111 ||vc909>=186 &&vc909<=192 ||vc909>=219 &&vc909<=222 ||vc909==113 ||vc909 ==8 ||vc909 ==229) { wg9c911.m55a32(vb4310); event.srcElement.isDirty =true; } if (ve6196) { ve6196 =vb4310.CustomEditors[ve6196]; ve6196.ImplementationObject.OnKeyDown(event.keyCode); }  if (vbaa98) { event.cancelBubble =true; event.returnValue =false; } }, m55a32:function(v9b990) { var v3020 =v9b990.ActiveEditCell.rowElement; if (wgIsColumnSetRow(v3020)) v3020 =wgGetColumnSetRow(v3020); else if (v3020.type =="PR") v3020 =wgGetPreviewRowParent(v3020); if (!v3020.markedEdit) { var v27269 =wgGetRowHeader(v3020); if (v27269) v27269.innerHTML ="<img align=absmiddle src='" +v9b990.LayoutSettings.ImageSettings.Folder +v9b990.LayoutSettings.ImageSettings.EditImage +"'>"; v3020.markedEdit =true; } }, m73a90:function(v94212,va4c37) {  var v90390 =wgGetRootRow(va4c37); if (v90390.rowValidated)return true; var v43143 =true; wg_Global.LastValRowObj =v90390; v43143 =ISEvent.Raise(v94212.LayoutSettings.ClientSideEvents.OnRowValidate,v90390); if (v43143)v90390.rowValidated =true; return v43143; }, m05179:function(vf2e48) { var vb5512 =vf2e48.ActiveEditCell; var v11f37 =vb5512.rowElement; var vf6859 =null; var vddf25 =wgGetRootRow(v11f37); if (wgIsRowDirty(v11f37)&&wg9c911.m73a90(vf2e48,v11f37)) { var vabb20 =vf2e48.Tables[vb5512.tblName]; var v2cb9 =null;  if (!vabb20.IsRootTable) v2cb9 =vabb20.GetSubTableById(wg38213.m88693(v11f37).subId);  var v0b279 =vabb20.NewRow(v2cb9); var va6c98 =v0b279.Cells;  for (var vbc884=0; vbc884<va6c98.length; vbc884++) { var v52f82 =va6c98[vbc884]; var v7d773 =v52f82.Name; var ve2052 =wgGetCellByName(v11f37,v7d773);  if (ve2052) { var v1ff47 =ve2052.contentMode; var vf2830 =""; if (v1ff47 =="HTML") { vf2830 =ve2052.innerHTML; if (vf2830 !="") { var v62340 =new RegExp("\r\n","g"); vf2830 =vf2830.replace(v62340,""); } } else vf2830 =ve2052.innerText;  v52f82.Text =vf2830;  if (ve2052.cellValue) v52f82.Value =ve2052.cellValue; else v52f82.Value =v52f82.Text;  if ((v52f82.Value =="" ||v52f82.Value ==" ")&&v1ff47 =="HTML")v52f82.Value =v52f82.Text;  v52f82.Modified =(v52f82.cellModified ==true ||vf2830 !=" "); v52f82.DataChanged =true; v52f82.OldValue =v52f82.OldText =""; v52f82._UIState ="Changed"; } }  v0b279.RowElement =v11f37; v0b279.Update(); return true; } return false; }, m4ef32:function(v5e071,v22b31) { var v6af71 =wg38213.m88693(v22b31); var v28531 =v5e071.Tables[v6af71.tblName];  v22b31 =wgGetRootRow(v22b31);  var v00d42 =wg38213.m2ec42(v22b31); v00d42.Delete(); }, m3b872:function(v9e393) { var ve0b71 =v9e393.ActiveEditCell; var v37331 =ve0b71.rowElement; var v52942 =null; var vfeb40 =wgGetRootRow(v37331); if (wgIsRowDirty(v37331)&&wg9c911.m73a90(v9e393,v37331)) { var v54744 =wg38213.m2ec42(v37331); v54744._UIState ="Changed"; v54744.Update(); return true; } return false; }, mede21:function(v16993,v29b25,v4e141,v10154) { v29b25.setAttribute("action","AddRow"); v29b25.setAttribute("tblName",v10154.Table.Id); if (!ISEvent.Raise(v16993.LayoutSettings.ClientSideEvents.OnBeforeAdd,v16993.Name,v10154.Table.Id,v16993.TempLRO)) return; var v56f93 =v16993.XmlReq; if (v29b25.selectSingleNode("//newRowData")) v29b25.removeChild(v29b25.selectSingleNode("//newRowData")); ISXml.CreateCDATA(v56f93,v29b25,"newRowData",v10154.ToXml()); if (v10154.SubTable) { var v96225 =v10154.SubTable.GetParentRow(); v96225 =wgGetPreviousRow(v16993.Tables[wg38213.m92e89(v96225)].GetElement(WG40.BODY,WG40.HTMLTABLE,v96225),v96225); v96225 =wgGetRootRow(v96225); wgec043.m6f684(v16993,v29b25,v96225); v29b25.setAttribute("tblSubId",v10154.SubTable.SubId); } v16993.SetStatus1("","addrow","CommonText/AddRow"); return true; }, m86a65:function(v81761,vc4d5,v21438,v82294) { vc4d5.setAttribute("action","UpdateRow"); vc4d5.setAttribute("tblName",v82294.Table.Name); vc4d5.setAttribute("position",v82294.Position); if (!ISEvent.Raise(v81761.LayoutSettings.ClientSideEvents.OnBeforeUpdate,v81761.Name,v82294.tblName,v81761.TempLRO)) return; var v5dd61 =v81761.XmlReq; if (vc4d5.selectSingleNode("//RowData")) vc4d5.removeChild(vc4d5.selectSingleNode("//RowData")); ISXml.CreateCDATA(v5dd61,vc4d5,"RowData",v82294.ToXml());  if (v82294.SubTable) { var v9855 =v82294.SubTable.GetParentRow(); v9855 =wgGetPreviousRow(v81761.Tables[wg38213.m92e89(v9855)].GetElement(WG40.BODY,WG40.HTMLTABLE,v9855),v9855); v9855 =wgGetRootRow(v9855); wgec043.m3a053(v81761,vc4d5,v9855); vc4d5.setAttribute("tblSubId",v82294.SubTable.SubId); }  vc4d5.setAttribute("parentPos",v82294.ParentPos); v81761.SetStatus1("","updaterow","CommonText/UpdateRow"); return true; }, mb5c47:function(v8d25,va6d92,v81236,v01821) { va6d92.setAttribute("action","DeleteRow"); va6d92.setAttribute("tblName",v01821.Table.Name); va6d92.setAttribute("position",v01821.Position); va6d92.setAttribute("keyValue",(v01821.KeyValue ? ISXml.EncodeString(v01821.KeyValue): "")); if (!ISEvent.Raise(v8d25.LayoutSettings.ClientSideEvents.OnBeforeDelete,v8d25.Name,v01821.Table.Name,v8d25.TempLRO)) return; if (v01821.SubTable) { var v13a83 =v01821.SubTable.GetParentRow(); v13a83 =wgGetPreviousRow(v8d25.Tables[wg38213.m92e89(v13a83)].GetElement(WG40.BODY,WG40.HTMLTABLE,v13a83),v13a83); if (v13a83.type =="CSRecord")v13a83 =wgGetRootRow(v13a83); wgec043.m3a053(v8d25,va6d92,v13a83); va6d92.setAttribute("tblSubId",v01821.SubTable.SubId); }  va6d92.setAttribute("parentPos",v01821.ParentPos); v8d25.SetStatus1("","deleterow","CommonText/DeleteRow"); return true; }, m99624:function(vfc575,v3e311) { var v19a5 =vfc575.LastRequestObj; var v34a92 =vfc575.Tables[v19a5.Table.Name]; var ve8436 =v19a5.RowElement; var v6c321 =v34a92.GetElement(WG40.BODY,WG40.HTMLTABLE,ve8436); var v4c853 =parseFloat(vfc575.TotalLoadedRows); var v18b34 =parseFloat(vfc575.TotalRows); var v56e36 =vfc575.LayoutSettings.PagingMode; var vd1335 =wgGetRootRow(ve8436); var vecb5 =vd1335.rowIndex; var v96e94 =false; if (!ISEvent.Raise(vfc575.LayoutSettings.ClientSideEvents.OnAfterDelete,vfc575.Name,v19a5.tblName,vfc575.LastRequestObj,vfc575.XmlResp)) return; if (v19a5.ParentPos =="") { wgRemoveRow(v34a92,ve8436);  if (v6c321.rows.length >0) { wgRefreshHierPosition(vfc575,v6c321,v6c321.rows[0],0,v18370); var v63681 =v6c321.rows[vecb5]; var v0f028 =v34a92.LastAECIndex; if (!v63681) { var v4ff71 =wgGetLastVisibleRow(v6c321); if (v4ff71) { v63681 =v4ff71.GetRowElement(); if (v63681) { if (v63681.type !="NewRow" &&v18370) wg9c911.me3b13(vfc575,v34a92,v6c321,v63681); } } } }  vfc575.ActiveEditCell =null; vfc575.LastSelObj =null;  if (v63681) { if (v0f028 >=v63681.cells.length ||v0f028 ==-1) { var v4ff71 =wg85027.m30e21(v63681); if (v4ff71)v0f028 =v4ff71.cellIndex; else v0f028 =v63681.cells.length-1; } wg60540.medb21(v63681.cells[v0f028],false,true); if (vfc575.LastEditObj)wg9c911.m24018(vfc575.LastEditObj,true); v96e94 =true; } if (v96e94) wg9c911.m38065(vfc575);  if (v34a92.IsRootTable) { v18b34--; v4c853--; vfc575.Set("TotalLoadedRows",v4c853); vfc575.Set("TotalRows",v4c853); vfc575.SetStatus2("","loaded",v4c853,v18b34); }  ve8436 =null; v18370 =null; } else  { var v13240 =v34a92.GetElement(WG40.BODY,WG40.HTMLDIV,ve8436); var v9ea70 =ISXml.GetNodeText(v3e311,"//htmlTB"); v13240.outerHTML =v9ea70; if (v34a92.IsRootTable) { vfc575.ClearChildTables(); wg38213.m39854(vfc575); } else  { var v5ed33 =v34a92.GetSubTableById(v6c321.subId); var v18370 =v5ed33.GetParentRow(); vfc575.ClearChildTables(v34a92.Id); } vfc575.ActiveEditCell =null; vfc575.LastSelObj =null; }  var v5fe45 =ISXml.GetNodeText(v3e311,"//footerString"); if (v5fe45 !="") { if (v34a92.IsRootTable) wg85027.m00245(vfc575,v34a92,null,v5fe45); else  { var v5ed33 =v34a92.GetSubTableById(v6c321.subId); wg85027.m00245(vfc575,null,v5ed33,v5fe45); } }  vfc575.SetStatus1("","ready","CommonText/Ready"); }, mc5d97:function(v4a041,v83744) { var v2ec98 =""; try  { v2ec98 =ISXml.GetNodeText(v83744,"//grouplevel"); }catch(e){} var v9654 =v4a041.LastRequestObj; var vd6b73 =v4a041.Tables[v9654.Table.Name]; var v1af86 =v9654.RowElement; var vf3e97 =vd6b73.GetElement(WG40.BODY,WG40.HTMLTABLE,v1af86); var vd5360 =parseFloat(v4a041.TotalLoadedRows); var v5ce67 =parseFloat(v4a041.TotalRows); var ved141 =v4a041.LayoutSettings.PagingMode; var v9400 =ISXml.GetNodeText(v83744,"//needReposition"); var v6c60 =ISXml.GetNodeText(v83744,"//keyValue"); var vdf067 =v4a041.LastSelObj; var ve1a70 =false; var va2026 =ISXml.GetNodeText(v83744,"//htmlTB"); if (!ISEvent.Raise(v4a041.LayoutSettings.ClientSideEvents.OnAfterUpdate,v4a041.Name,v9654.Table.Id,v4a041.LastRequestObj,v4a041.XmlResp)) return; if (v9400 =="True" ||(v2ec98 !="" &&va2026 !="")) { if (v2ec98 =="") { var ve8996 =wgGetRootRow(v1af86); var vc8c9 =ve8996.position; var vfcc42 =ve8996.rowIndex; var v62247 =wgGetHierRecord(v1af86); var v86892 =null; if (v62247 &&v62247.type !="HierRecord")v62247 =null; if (vd6b73.PreviewRowVisible) v86892 =wgGetPreviewRow(v1af86); if (wgIsColumnSetRow(v1af86)) { var va5941 =wgGetColumnSetRows(v1af86); for (var v50387=0; v50387<va5941.length; v50387++) { va5941[v50387].removeNode(true); } } else  { v1af86.removeNode(true); } if (v86892)v86892.removeNode(true);  if (v62247)v62247.removeNode(true); var v50165 =parseFloat(ISXml.GetNodeText(v83744,"//position")); if (!vd6b73.IsRootTable ||ved141 =="None" ||(ved141 =="VirtualLoad" &&(vd5360 ==v5ce67 ||v50165 <=vd5360))) { var v96579 =ISXml.GetNodeText(v83744,"//htmlRow"); wg85027.m15f64("<table>" +v96579 +"</table>"); var vac713 =wg85027.md1593(); var newt,hiert; var v70654 =vf3e97.tBodies[vf3e97.tBodies.length-1];  if (!vd6b73.IsRootTable) { try  { vd5360 =parseFloat(vf3e97.rows[vf3e97.rows.length-1].position)+1; }catch(e){vd5360 =0;} } newt =v70654.appendChild(vac713.rows[0]);  var v87931 =vac713.rows.length; var v54c90 =0; for (var v50387=0; v50387<v87931; v50387++) { var v34c74 =vac713.rows[0]; wg38213.m79d94(v34c74); if (v34c74.type !="HierRecord") { v70654.appendChild(v34c74); v54c90++; } }  if (v62247 &&v1af86.childExpanded =="True") { if (v1af86.relNames !=newt.relNames) { v1af86.childExpanded ="False"; v62247 =v70654.appendChild(vac713.rows[0]); } }  if (v50165 <vd5360) { var vf5056 =(v50165>vc8c9 ? v50165+1 : v50165); hiert =v62247; if (hiert)v70654.appendChild(hiert); if (vf5056 <vd5360) { var v3ab99 =parseFloat(newt.rowIndex); vf3e97.moveRow(newt.rowIndex,wgGetRowByPositionExact(vf3e97,vf5056).rowIndex); if (v54c90 >0) { for (var v7e484=0; v7e484<v54c90; v7e484++) { vf3e97.moveRow(v3ab99+v7e484+1,newt.rowIndex+v7e484+1); } } if (hiert)vf3e97.moveRow(hiert.rowIndex,newt.rowIndex+v54c90+1); } if (v50165 ==vd5360-1) wg9c911.m67a9(v4a041,vd6b73,vf3e97,newt);  wg9c911.maa946(v4a041,v1af86,newt); ve1a70 =true; } } else  { if (vd6b73.IsRootTable) { vd5360--; v4a041.Set("TotalLoadedRows",vd5360); v4a041.SetStatus2("","loaded",vd5360,v5ce67); } }  wgRefreshHierPosition(v4a041,vf3e97,vf3e97.rows[0],0,hiert);  var v11a82 =false; try  { var vffb15 =v4a041.LastSelObj.getRowElement(); var v0ad51 =wg38213.m88693(vffb15); if (v0ad51 ==null)v11a82=true; } catch (e){ v11a82=true; }  if (v11a82) { v4a041.ActiveEditCell =null; v4a041.LastSelObj =null; wg60540.medb21(vf3e97.rows[vfcc42].cells[vd6b73.LastAECIndex],false,true); }  } else  { var v68c93 =vd6b73.GetElement(WG40.BODY,WG40.HTMLDIV,v9654.RowElement); var v96579 =ISXml.GetNodeText(v83744,"//htmlTB"); var vfcc42 =v1af86.rowIndex; v68c93.outerHTML =v96579;  if (vd6b73.IsRootTable) { v4a041.ClearChildTables(); wg38213.m39854(v4a041); } else  { var v83d81 =vd6b73.GetSubTableById(vf3e97.subId); var v62247 =v83d81.GetParentRow(); v4a041.ClearChildTables(vd6b73.Id); } var vd5576 =v2ec98.split("_"); var v32431; v68c93 =document.getElementById(v68c93.id); vf3e97 =v68c93.childNodes[0]; for (var v50387=0; v50387<vd5576.length; v50387++) { var vf887 =wgGetRowByGroup(vf3e97,v50387,vd5576[v50387],v32431); if (vf887) { if (vf887.childrenLoaded =="True") { wgExpandGroupRow(vf887); } } v32431 =vf887; } v4a041.ActiveEditCell =null; v4a041.LastSelObj =null; var ve1679 =vf3e97.rows[vfcc42]; var v07937 =vd6b73.LastAECIndex; if (ve1679) { if (v07937 >=ve1679.cells.length)v07937 =ve1679.cells.length-1;  wg60540.medb21(vf3e97.rows[vfcc42].cells[v07937],false,true); ve1a70 =true; } } } else  { ve1a70 =true; var v96579 =ISXml.GetNodeText(v83744,"//htmlRow"); wg85027.m15f64("<table>" +v96579 +"</table>"); var vac713 =wg85027.md1593(); var v8ff14 =vac713.rows[0]; var va5997 =wgGetRootRow(v1af86); var v60121;  va5997.replaceNode(v8ff14 ); v60121 =v8ff14;  var v27b61 =v8ff14; var v87931 =vac713.rows.length; for (var vf4d96=0; vf4d96<v87931; vf4d96++) { v27b61 =wgGetNextRow(vf3e97,v27b61); var v34c74 =vac713.rows[0]; wg38213.m79d94(v34c74); if (v27b61.type !="HierRecord" &&v27b61.type !="GroupTotalRow") { if (v27b61.type ==v34c74.type) { v27b61.replaceNode(v34c74); v27b61 =null; v27b61 =v34c74; var ve8996 =va5997; if (va5997.srLevel) { ve8996 =wgGetRootRow(wg85027.mc7f63(vf3e97,v34c74)); if (ve8996.srLevel ==va5997.srLevel)ve8996 =va5997; }  if ((!v34c74.srLevel &&v34c74.style.display !="")||(typeof(va5997.srLevel)!="undefined" &&(va5997.srExpanded =="True" ||va5997.style.display =="")))v34c74.style.display =""; v60121 =v27b61; } } }  v8ff14.style.display =""; if (vdf067 &&vdf067.GetRowElement().rowIndex ==-1) { v4a041.ActiveEditCell =null; v4a041.LastSelObj =null; try  { if (typeof(v8ff14.srLevel)!="undefined" &&v4a041.LayoutSettings.EditOnClick) { var vebd18 =vf3e97.rows[oldLSO.rowIndex]; v4a041.LastEditObj.cellElement =vebd18.cells[vd6b73.LastAECIndex]; wg60540.medb21(v4a041.LastEditObj.cellElement,false,true); } else wg60540.medb21(v8ff14.cells[vd6b73.LastAECIndex],false,true); }catch(e){} }  if (va5997.childExpanded =="True") { if (va5997.relNames !=v8ff14.relNames) { va5997.childExpanded ="False"; v62247 =wgGetNextRow(vf3e97,v60121); v62247.replaceNode(vac713.rows[0]); } } wg85027.m8cf25(); wg9c911.maa946(v4a041,va5997,v8ff14); wg9c911.m76e75(v4a041,vd6b73,va5997,v8ff14); v1af86 =null; }  var vb5590 =ISXml.GetNodeText(v83744,"//footerString"); if (vb5590 !="") { if (vd6b73.IsRootTable) wg85027.m00245(v4a041,vd6b73,null,vb5590); else  { var v83d81 =vd6b73.GetSubTableById(vf3e97.subId); wg85027.m00245(v4a041,null,v83d81,vb5590); } }  if (v4a041.LastEditObj) { wg9c911.m38516(v4a041); } else  { if (ve1a70) wg9c911.m38065(v4a041); } v4a041.SetStatus1("","ready","CommonText/Ready"); }, m59c12:function(va0254,v0af8) { var v93a8 =""; try  { v93a8 =ISXml.GetNodeText(v0af8,"//grouplevel"); }catch(e){}  var vaba24 =va0254.LastRequestObj; var vbac18 =va0254.Tables[vaba24.Table.Id]; var v88f61 =parseFloat(va0254.TotalLoadedRows); var v3df75 =parseFloat(va0254.TotalRows); var vdc637 =va0254.LayoutSettings.PagingMode; var vd5322 =null;  if (vbac18.IsRootTable) vd5322 =vbac18.GetElement(WG40.BODY,WG40.HTMLTABLE); else vd5322 =vaba24.SubTable.GetElement(WG40.BODY,WG40.HTMLTABLE); var vce599 =va0254.LayoutSettings.ResetNewRowValuesOnError;  try  { if (vaba24.RowElement) { wg9c911.mf1882(va0254,vaba24.RowElement); if (va0254.LastSelObj.GetRowElement().type =="NewRow") wg60540.me2c56(vaba24.RowElement,va0254.GetCurSelImage()); } } catch(e){}  if (!ISEvent.Raise(va0254.LayoutSettings.ClientSideEvents.OnAfterAdd,va0254.Name,vaba24.tblName,va0254.LastRequestObj,va0254.XmlResp)) return; if (v93a8 !="") { var vcc030 =null;  if (vbac18.IsRootTable) vcc030 =vbac18.GetElement(WG40.BODY,WG40.HTMLDIV); else vcc030 =vaba24.SubTable.GetElement(WG40.BODY,WG40.HTMLDIV);  var v89c93 =ISXml.GetNodeText(v0af8,"//htmlTB"); vcc030.outerHTML =v89c93;  if (vbac18.IsRootTable) wg38213.m39854(va0254); if (vbac18.IsRootTable) va0254.ClearChildTables(); else  va0254.ClearChildTables(vbac18.Id); var v2ec59 =v93a8.split("_"); var v33c76;  for (var v65551=0; v65551<v2ec59.length; v65551++) { var v0a039 =wgGetRowByGroup(vd5322,v65551,v2ec59[v65551],v33c76); if (v0a039) { if (v0a039.childrenLoaded =="True") { wgExpandGroupRow(v0a039); } } v33c76 =v0a039; }  if (vdc637 =="None")v88f61++; else v88f61 =va0254.LayoutSettings.VirtualPageSize; } else  { var v71575 =-1;  var v89c93 =""; try  { v71575 =parseFloat(ISXml.GetNodeText(v0af8,"//position"));  v89c93 =ISXml.GetNodeText(v0af8,"//htmlRow");  } catch(e){} var vda993 =false;  if (v89c93 =="") { va0254.SetStatus1("","ready","CommonText/Ready"); return; }  if (!vbac18.IsRootTable ||vdc637 =="None" ||(vdc637 =="VirtualLoad" &&(v88f61 ==v3df75 ||v71575 <=v88f61))) { wg85027.m15f64("<table>" +v89c93 +"</table>"); var ve4b14 =wg85027.md1593(); var newt,hiert; var v6e373 =vd5322.tBodies[vd5322.tBodies.length-1];  if (!vbac18.IsRootTable) { try  { v88f61 =parseFloat(vd5322.rows[vd5322.rows.length-1].position)+1; }catch(e) {v88f61 =0;} } newt =v6e373.appendChild(ve4b14.rows[0]); var vc7351 =ve4b14.rows.length; for (var v60821=0; v60821<vc7351; v60821++) { if (ve4b14.rows[0].type =="HierRecord") { hiert =ve4b14.rows[0]; vc7351--; } v6e373.appendChild(ve4b14.rows[0]); } var va8080 =newt.rowIndex; if (v71575 <v88f61) { vd5322.moveRow(newt.rowIndex,wgGetRowByPositionExact(vd5322,v71575).rowIndex); for (var v65551=0; v65551<vc7351; v65551++) { vd5322.moveRow(va8080+v65551+1,newt.rowIndex+v65551+1); } if (hiert)vd5322.moveRow(hiert.rowIndex,newt.rowIndex+(vc7351)+1);  wgRefreshHierPosition(va0254,vd5322,wgGetNextRow(vd5322,(hiert ? hiert : newt)),v71575+1,hiert); vda993 =true; } var va3059 =wgGetCellByPosition(newt,0); if (va0254.HasFocus()) va3059.setActive();  wg60540.m7794(va0254,va3059);  wg85027.m8cf25(); if (vbac18.IsRootTable)v88f61 +=1;  if (!vda993) { wg9c911.m67a9(va0254,vbac18,vd5322,newt); } } }  if (vbac18.IsRootTable) { v3df75 +=1;  if (v88f61 >v3df75)v88f61 =v3df75; va0254.Set("TotalLoadedRows",v88f61); va0254.Set("TotalRows",v88f61);  va0254.SetStatus2("","loaded",v88f61,v3df75); }  var v53996 =ISXml.GetNodeText(v0af8,"//footerString"); if (v53996 !="") { if (vbac18.IsRootTable) wg85027.m00245(va0254,vbac18,null,v53996); else  { var vda566 =vbac18.GetSubTableById(vd5322.subId); wg85027.m00245(va0254,null,vda566,v53996); } }  va0254.SetStatus1("","ready","CommonText/Ready"); }, me3b13:function(vfd988,v11e69,v84b60,ve2a58) { if (wgIsRecordRow(ve2a58)) { var vccb99 =wgec043.me4a93(ve2a58); var v5a595 =wgGetHierRecord(ve2a58); if (v5a595 &&v5a595.type !="HierRecord")v5a595 =null; if (vccb99)wgec043.me6019(vfd988,vccb99.childNodes[0],v5a595); if (v5a595) { var v9ac64 =wgec043.m53573(v5a595); v9ac64.innerHTML =""; } } }, m67a9:function(vc6e23,v0b829,v93854,v0e339) { var v18c11 =wgGetPreviousRow(v93854,v0e339); if (v18c11 &&v18c11.type =="HierRecord") { var ve4a62 =wgec043.m53573(v18c11); wgec043.ma3b22(vc6e23,ve4a62); v18c11 =wgGetPreviousRow(v93854,v18c11); v18c11 =wgGetRootRow(v18c11); if (v18c11 &&v18c11.type =="Record") { var v3c159 =wgec043.me4a93(v18c11); wgec043.me9478(vc6e23,v3c159.childNodes[0]); } } else if (v18c11 &&wgIsRecordRow(v18c11)&&!v0b829.IsRootTable) { v18c11 =wgGetRootRow(v18c11); var v3c159 =wgec043.me4a93(v18c11); wgec043.me9478(vc6e23,v3c159.childNodes[0],true); } }, maa946:function(v3a868,v1a416,v0d152) { if (v1a416.childExpanded &&v1a416.childExpanded =="True") { var v9a423 =wgec043.me4a93(v0d152); if (v9a423) { wgec043.m51c36(v3a868,v9a423,"False"); v0d152.childExpanded ="True"; } }  if (v1a416.tblName)v0d152.tblName =v1a416.tblName; }, m76e75:function(va7957,v22890,vd3b48,v20120) { if (vd3b48.srLevel &&vd3b48.srExpanded =="True") { var v38813 =wg85027.m61352(v22890,v20120); if (v38813) { v38813.src =va7957.LayoutSettings.ImageSettings.Folder +va7957.LayoutSettings.ImageSettings.CollapseImage; v20120.srExpanded ="True"; } } }, mfe039:function(va1157,v3da90,v18948) { var v9d957 =wgGetGridById(v3da90); var veae90 =v9d957.CustomEditors[v18948]; veae90.ImplementationObject.OnDropdown(); }};var ceProto =WebGridCustomEditor.prototype;ceProto.GetBaseEditorElement =function(){ if (this.baseEditor ==null) { if (this.BaseEditorType =="Textbox") this.baseEditor =document.getElementById(this.Grid.Name +"_TB" +this.Name); else this.baseEditor =this.ImplementationObject.GetBaseEditorElement(); } return this.baseEditor;}; ceProto.GetEditCell =function(){ return this.Grid.GetActiveEditCell();};ceProto.GetEditCellElement =function(){ return this.GetEditCell().element;};ceProto.GetEditRowElement =function(){ return this.GetEditCell().rowElement;};ceProto.GetTable =function(){ var ac =this.Grid.GetActiveEditCell(); var table =this.Grid.Tables[ac.tblName]; return table;}; ceProto.GetColumnXml =function(){ var table =this.GetTable(); return table.GetColumn(wgGetColNameByCell(this.GetEditCellElement()));};ceProto.GetColumnEditorProperties =function(){ var colXml =this.GetColumnXml(); return colXml.CustomEditorProperties;};ceProto.GetEditorClientID =function(){ var colXml =this.GetColumnXml(); return colXml.CustomEditorServerId;};ceProto.GetDropdownObject =function(){}; ceProto.RowDirty =function(){ wg9c911.m55a32(this.Grid);};ceProto.CellDirty =function(){ this.GetEditCellElement().cellModified =true;};ceProto.IsRowDirty =function(){ return wgIsRowDirty(this.GetEditRowElement());};ceProto.GetDropdownButtonElement =function(){ if (this.DDObj ==null){ if (this.DropdownButtonType =="Image") this.DDObj =document.getElementById(this.Grid.Name +"_DD" +this.Name); else this.DDObj =this.ImplementationObject.GetDropdownButtonElement(); } return this.DDObj; }; ceProto.EnterEditMode =function(ac,colXml,mode,isDirty){ var be; var grid =this.Grid; if (this.ControlType =="DHTMLClientControl") { be =this.GetBaseEditorElement(); if (be !=null &&this.BaseEditorType =="Textbox") { if (!be.initialized) { var ceName =this.Name; be.attachEvent("onfocus",wg9c911.m92c10); be.onselectstart =function(){event.cancelBubble =true; return true;}; be.onkeydown =function(){wg9c911.m4a347(grid,ceName);}; be.className =grid.LayoutSettings.TextBoxClass; } wgDispObjGeneric(grid,be,ac.element,1,1,null,null,this.HasDropdownButton); } }  if (this.HasDropdownButton) { var dd =this.GetDropdownButtonElement(); if (this.DropdownButtonType =="Image" &&dd !=null) { dd.style.cursor ="hand"; wgDispObjGeneric(grid,dd,ac.element,ac.element.offsetWidth-this.DropdownButtonWidth,2,true); } }  var customResult =this.ImplementationObject.OnEnterEditMode(ac,colXml,isDirty); this.ImplementationObject.OnSetValue(ac.element.innerText,ac); if (isDirty)this.ImplementationObject.OnDirty();  if (!be)be =customResult;  return be;};ceProto.ClearEditObject =function(){ this.Grid.LastEditObj =null; this.Grid.IsInEditMode =false;};function WebGridEditDestructor(){ var vd3911 =delete wg9c911;}window.attachEvent("onunload",WebGridEditDestructor);